(this["webpackJsonphostel-app"]=this["webpackJsonphostel-app"]||[]).push([[0],{141:function(e,t,n){},234:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(24),c=n.n(r),s=(n(141),n(10)),o=n(64),i=n(130),d=n(129),l=n(13),j=n(21),u="STUDENT_LIST_REQUEST",b="STUDENT_LIST_SUCCESS",h="STUDENT_LIST_ERROR",O="STUDENT_ADD_REQUEST",p="STUDENT_ADD_SUCCESS",x="STUDENT_ADD_ERROR",m="STUDENT_DETAILS_REQUEST",g="STUDENT_DETAILS_SUCCESS",f="STUDENT_DETAILS_ERROR",v="STUDENT_UPDATE_REQUEST",y="STUDENT_UPDATE_SUCCESS",E="STUDENT_UPDATE_ERROR",S="STUDENT_UPDATE_RESET",T="STUDENT_DELETE_REQUEST",N="STUDENT_DELETE_SUCCESS",_="STUDENT_DELETE_ERROR",C="STUDENT_DELETE_RESET",I="STUDENT_ROOM_NO_REQUEST",A="STUDENT_ROOM_NO_SUCCESS",L="STUDENT_ROOM_NO_ERROR",k="STUDENT_ROOM_NO_RESET",U=n(22),R=n.n(U),D="https://boiling-dusk-43245.herokuapp.com",w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var n=Object(j.a)(Object(l.a)().mark((function n(a,r){var c,s,o,i,d;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:u}),c=r(),s=c.userLogin.userInfo,o={headers:{Authorization:"Bearer ".concat(s.token)}},n.next=6,R.a.get("".concat(D,"/student/all?keyword=").concat(e,"&pageNumber=").concat(t),o);case 6:i=n.sent,d=i.data,a({type:b,payload:d}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:h,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},F=function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:v}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.put("".concat(D,"/student/").concat(e._id),e,s);case 6:o=t.sent,i=o.data,n({type:y,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:E,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},G=n(17),P="USER_LOGIN_REQUEST",B="USER_LOGIN_SUCCESS",z="USER_LOGIN_FAIL",M="USER_LOGOUT",Q="USER_REGISTER_REQUEST",H="USER_REGISTER_SUCCESS",J="USER_REGISTER_FAIL",Y="USER_DETAILS_REQUEST",V="USER_DETAILS_SUCCESS",q="USER_DETAILS_FAIL",W="USER_DETAILS_RESET",K="USER_UPDATE_PROFILE_REQUEST",X="USER_UPDATE_PROFILE_SUCCESS",Z="USER_UPDATE_PROFILE_FAIL",$="USER_UPDATE_PROFILE_RESET",ee="USER_LIST_REQUEST",te="USER_LIST_SUCCESS",ne="USER_LIST_FAIL",ae="USER_LIST_RESET",re="USER_DELETE_REQUEST",ce="USER_DELETE_SUCCESS",se="USER_DELETE_FAIL",oe="USER_UPDATE_REQUEST",ie="USER_UPDATE_SUCCESS",de="USER_UPDATE_FAIL",le="USER_UPDATE_RESET",je="ATTENDANCE_DATA_ENTER_REQUEST",ue="ATTENDANCE_DATA_ENTER_SUCCESS",be="ATTENDANCE_DATA_ENTER_FAIL",he="ATTENDANCE_DATA_ENTER_RESET",Oe="ATTENDANCE_ANALYSIS_REQUEST",pe="ATTENDANCE_ANALYSIS_SUCCESS",xe="ATTENDANCE_ANALYSIS_FAIL",me="ATTENDANCE_ANALYSIS_RESET",ge="ATTENDANCE_DELETE_REQUEST",fe="ATTENDANCE_DELETE_SUCCESS",ve="ATTENDANCE_DELETE_FAIL",ye=Object(o.combineReducers)({studentsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{students:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(G.a)(Object(G.a)({},e),{},{loading:!0});case b:return{loading:!1,students:t.payload.students,pages:t.payload.pages,page:t.payload.page};case h:return{loading:!1,error:t.payload};default:return e}},studentDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(G.a)(Object(G.a)({},e),{},{loading:!0});case g:return{loading:!1,student:t.payload};case f:return{loading:!1,error:t.payload};default:return e}},studentAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{students:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(G.a)(Object(G.a)({},e),{},{loading:!0});case p:return{loading:!1,success:!0};case x:return{loading:!1,error:t.payload};default:return e}},studentUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(G.a)(Object(G.a)({},e),{},{loading:!0});case y:return{loading:!1,success:!0};case E:return{loading:!1,error:t.payload};case S:return{};default:return e}},studentDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(G.a)(Object(G.a)({},e),{},{loading:!0});case N:return{loading:!1,success:!0};case _:return{loading:!1,error:t.payload};case C:return{};default:return e}},getStudentsByRoomNo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(G.a)(Object(G.a)({},e),{},{loading:!0});case A:return{loading:!1,students:t.payload.students,attendance:t.payload.attendance};case L:return{loading:!1,error:t.payload};case k:return{};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return{loading:!0};case B:return{loading:!1,userInfo:t.payload};case z:return{loading:!1,error:t.payload};case M:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return{loading:!0};case H:return{loading:!1,userInfo:t.payload};case J:return{loading:!1,error:t.payload};case M:return{};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:return Object(G.a)(Object(G.a)({},e),{},{loading:!0});case V:return{loading:!1,user:t.payload};case q:return{loading:!1,error:t.payload};case W:return{user:{}};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case K:return{loading:!0};case X:return{loading:!1,success:!0,userInfo:t.payload};case Z:return{loading:!1,error:t.payload};case $:return{};default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ee:return{loading:!0};case te:return{loading:!1,users:t.payload};case ne:return{loading:!1,error:t.payload};case ae:return{users:[]};default:return e}},userDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case re:return{loading:!0};case ce:return{loading:!1,success:!0};case se:return{loading:!1,error:t.payload};default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case oe:return{loading:!0};case ie:return{loading:!1,success:!0};case de:return{loading:!1,error:t.payload};case le:return{user:{}};default:return e}},attendanceDataEnter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case je:return Object(G.a)(Object(G.a)({},e),{},{loading:!0});case ue:return{loading:!1,attendance:t.payload};case be:return{loading:!1,error:t.payload};case he:return{};default:return e}},attendanceAnalysis:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Oe:return{loading:!0};case pe:return{loading:!1,attendance:t.payload};case xe:return{loading:!1,error:t.payload};case me:return{};default:return e}},attendanceDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ge:return{loading:!0};case fe:return{loading:!1,success:!0};case ve:return{loading:!1,error:t.payload};case me:return{};default:return e}}}),Ee={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Se=[i.a],Te=Object(o.createStore)(ye,Ee,Object(d.composeWithDevTools)(o.applyMiddleware.apply(void 0,Se))),Ne=n(11),_e=n(256),Ce=n(244),Ie=n(245),Ae=n(131),Le=n(16),ke=n(1),Ue=function(e){var t=e.stuentDetails;return Object(ke.jsxs)(_e.a,{className:"my-3 p-3 rounded",children:[Object(ke.jsx)(Le.Link,{to:"/student/".concat(t._id),children:Object(ke.jsx)(Ce.a,{src:t.image,rounded:!0,fluid:!0})}),Object(ke.jsxs)(_e.a.Body,{children:[Object(ke.jsx)(Le.Link,{to:"/student/".concat(t._id),children:Object(ke.jsx)(_e.a.Title,{as:"div",children:Object(ke.jsx)("strong",{children:t.name})})}),Object(ke.jsx)(Ie.a,{children:Object(ke.jsxs)(Ae.a,{children:["Room No: ",t.roomNo]})}),Object(ke.jsx)(Ie.a,{children:Object(ke.jsxs)(Ae.a,{children:["Stream: ",t.category]})}),Object(ke.jsxs)(_e.a.Text,{children:["Contact:",Object(ke.jsx)("a",{href:"tel:".concat(t.contact),children:t.contact})]})]})]})},Re=n(246),De=function(){return Object(ke.jsx)(Re.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(ke.jsx)("span",{className:"sr-only",children:"Loading..."})})},we=n(247),Fe=function(e){var t=e.variant,n=e.children;return Object(ke.jsx)(we.a,{variant:t,children:n})};Fe.defaultProps={variant:"info"};var Ge=Fe,Pe=n(136),Be=n(257),ze=n(34),Me=function(e){var t=e.pages,n=e.page,a=e.isAdmin,r=void 0!==a&&a,c=e.keyword,s=void 0===c?"":c;return t>1&&Object(ke.jsx)(Be.a,{children:Object(Pe.a)(Array(t).keys()).map((function(e){return Object(ke.jsx)(ze.LinkContainer,{to:r?"/page/".concat(e+1):s?"/search/".concat(s,"/page/").concat(e+1):"/page/".concat(e+1),children:Object(ke.jsx)(Be.a.Item,{active:e+1===n,children:e+1})},e+1)}))})},Qe=n(249),He=n(250),Je=n(251),Ye=n(248),Ve=function(e){var t=e.keyword,n=e.pageNumber,r=Object(s.b)(),c=Object(s.c)((function(e){return e.studentsList})),o=c.loading,i=c.error,d=c.students,l=c.page,j=c.pages;return Object(a.useEffect)((function(){d||r(w(t,n))}),[r,t,n]),Object(ke.jsx)(ke.Fragment,{children:o?Object(ke.jsx)(De,{}):i?Object(ke.jsx)(Ge,{variant:"danger",children:i}):Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsxs)(Ye.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(ke.jsx)("thead",{children:Object(ke.jsxs)("tr",{children:[Object(ke.jsx)("th",{children:"Stream"}),Object(ke.jsx)("th",{children:"NAME"}),Object(ke.jsx)("th",{children:"STATUS"}),Object(ke.jsx)("th",{children:"CONTACT"}),Object(ke.jsx)("th",{children:"ROOM NO"}),Object(ke.jsx)("th",{children:"CITY"})]})}),Object(ke.jsx)("tbody",{children:d.map((function(e){return Object(ke.jsxs)("tr",{children:[Object(ke.jsx)("td",{children:e.category}),Object(ke.jsx)("td",{children:Object(ke.jsx)(Le.Link,{to:"/student/".concat(e._id),children:e.name})}),Object(ke.jsx)("td",{children:Object(ke.jsx)("span",{style:{color:"Outside"===e.status?"red":"Home"===e.status?"blue":"black"},children:e.status})}),Object(ke.jsx)("td",{children:Object(ke.jsx)("a",{href:"tel:".concat(e.contact),children:e.contact})}),Object(ke.jsx)("td",{children:e.roomNo}),Object(ke.jsx)("td",{children:e.city})]},e._id)}))})]}),Object(ke.jsx)(Me,{pages:j,page:l,isAdmin:!0})]})})},qe=function(e){var t=e.match,n=e.history,r=Object(a.useState)(!0),c=Object(Ne.a)(r,2),o=c[0],i=c[1],d=t.params.keyword,l=t.params.pageNumber||1,j=Object(s.c)((function(e){return e.userLogin})),u=j.loading,b=j.userInfo,h=Object(s.b)(),O=Object(s.c)((function(e){return e.studentsList})),p=O.loading,x=O.error,m=O.students,g=O.page,f=O.pages;return Object(a.useEffect)((function(){u||b||n.push("/login"),h(w(d,l))}),[d,l]),Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(ke.Fragment,{children:Object(ke.jsx)(Qe.a,{children:Object(ke.jsxs)(Ie.a,{className:"justify-content-md-center",children:[Object(ke.jsx)(Ae.a,{xs:!0,lg:"2"}),Object(ke.jsx)(Ae.a,{md:"auto",children:Object(ke.jsx)(He.a,{toggle:!0,children:["Grid","Table"].map((function(e){return Object(ke.jsx)(Je.a,{type:"radio",variant:"secondary",name:"radio",value:e,checked:(o?"Grid":"Table")===e,onChange:function(e){return i("Grid"===e.target.value)},children:"Grid"===e?Object(ke.jsx)(ke.Fragment,{children:" Grid"}):Object(ke.jsx)(ke.Fragment,{children:" Table "})},e)}))})}),Object(ke.jsx)(Ae.a,{xs:!0,lg:"2"})]})})}),Object(ke.jsx)("h1",{children:"Students"}),p?Object(ke.jsx)(De,{}):x?Object(ke.jsx)(Ge,{variant:"danger",children:x}):o?Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(Ie.a,{children:m.map((function(e){return Object(ke.jsx)(Ae.a,{sm:12,md:6,lg:4,xl:3,children:Object(ke.jsx)(Ue,{stuentDetails:e})},e._id)}))}),Object(ke.jsx)(Me,{pages:f,page:g,keyword:d||""})]}):Object(ke.jsx)(ke.Fragment,{children:Object(ke.jsx)(Ve,{keyword:d,pageNumber:l})})]})},We=n(20),Ke=n(255),Xe=n(258),Ze=n(252),$e=n(254),et=n(76),tt=function(e){var t=e.history,n=Object(a.useState)(""),r=Object(Ne.a)(n,2),c=r[0],s=r[1];return Object(ke.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),c.trim()?t.push("/search/".concat(c)):t.push("/")},inline:!0,children:[Object(ke.jsx)($e.a.Control,{type:"text",value:c,name:"q",placeholder:"Search students...",className:"mr-sm-2 ml-sm-5",onChange:function(e){return s(e.target.value)}}),Object(ke.jsx)(et.a,{className:"p-2",type:"submit",variant:"outline-success",children:"Search"})]})},nt=function(){return function(e){localStorage.removeItem("userInfo"),e({type:M}),e({type:W}),e({type:ae}),document.location.href="/login"}},at=function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i,d;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Y}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.get("".concat(D,"/users/").concat(e),s);case 6:o=t.sent,i=o.data,n({type:V,payload:i}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(nt()),n({type:q,payload:d});case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},rt=function(e){var t=e.history,n=Object(s.b)(),a=Object(s.c)((function(e){return e.userLogin})).userInfo;return Object(ke.jsx)("header",{children:Object(ke.jsx)(Ke.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(ke.jsxs)(Qe.a,{children:[Object(ke.jsx)(ze.LinkContainer,{to:"/",children:Object(ke.jsx)(Ke.a.Brand,{children:"SRMCEM Hostel Portal"})}),Object(ke.jsx)(Ke.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(ke.jsxs)(Ke.a.Collapse,{id:"basic-navbar-nav",children:[Object(ke.jsx)(We.d,{render:function(e){var t=e.history;return Object(ke.jsx)(tt,{history:t})}}),Object(ke.jsxs)(Xe.a,{className:"ml-auto",children:[Object(ke.jsxs)(Ze.a,{title:"More",children:[Object(ke.jsx)(ze.LinkContainer,{to:"/attendance",children:Object(ke.jsx)(Ze.a.Item,{children:"Attendance"})}),Object(ke.jsx)(ze.LinkContainer,{to:"/addStudent",children:Object(ke.jsx)(Ze.a.Item,{children:"Add Student"})}),Object(ke.jsx)(ze.LinkContainer,{to:"/analysis",children:Object(ke.jsx)(Ze.a.Item,{children:"View Analysis"})})]}),a?Object(ke.jsxs)(Ze.a,{title:a.name,id:"username",children:[Object(ke.jsx)(ze.LinkContainer,{to:"/profile",children:Object(ke.jsx)(Ze.a.Item,{children:"Profile"})}),a.isAdmin&&Object(ke.jsx)(ze.LinkContainer,{to:"/userList",children:Object(ke.jsx)(Ze.a.Item,{children:"Users List"})}),Object(ke.jsx)(Ze.a.Item,{onClick:function(){n(nt()),t.push("/login")},children:"Logout"})]}):Object(ke.jsx)(ze.LinkContainer,{to:"/login",children:Object(ke.jsxs)(Xe.a.Link,{children:[Object(ke.jsx)("i",{className:"fas fa-user"})," Sign In"]})})]})]})]})})})},ct=function(){return Object(ke.jsx)("div",{style:{height:"40px",backgroundColor:"#313331",width:"100%"}})},st=function(e){var t=e.children;return Object(ke.jsx)(Qe.a,{children:Object(ke.jsx)(Ie.a,{className:"justify-content-md-center",children:Object(ke.jsx)(Ae.a,{xs:12,md:6,children:t})})})},ot=function(){var e=Object(We.k)(),t=Object(a.useState)(!1),n=Object(Ne.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(""),i=Object(Ne.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)(""),h=Object(Ne.a)(b,2),m=h[0],g=h[1],f=Object(a.useState)(""),v=Object(Ne.a)(f,2),y=v[0],E=v[1],T=Object(a.useState)(""),N=Object(Ne.a)(T,2),_=N[0],C=N[1],I=Object(a.useState)(""),A=Object(Ne.a)(I,2),L=A[0],k=A[1],U=Object(a.useState)(""),w=Object(Ne.a)(U,2),G=w[0],P=w[1],B=Object(a.useState)(""),z=Object(Ne.a)(B,2),M=z[0],Q=z[1],H=Object(a.useState)(""),J=Object(Ne.a)(H,2),Y=J[0],V=J[1],q=Object(a.useState)(""),W=Object(Ne.a)(q,2),K=W[0],X=W[1],Z=Object(a.useState)("Hostel"),$=Object(Ne.a)(Z,2),ee=$[0],te=$[1],ne=Object(s.b)(),ae=Object(s.c)((function(e){return e.studentAdd})),re=ae.loading,ce=ae.error,se=ae.success,oe=Object(s.c)((function(e){return e.studentUpdate})),ie=oe.loading,de=oe.error,le=oe.success;Object(a.useEffect)((function(){if(le&&(ne({type:S}),e.push("/")),e.location.state&&e.location.state.studentProps){c(!0);var t=e.location.state.studentProps;u(t.name),g(t.address),E(t.category),C(t.city),k(t.contact),P(t.fatherContact),Q(t.image),V(t.roomNo),X(t.blockNo),te(t.status)}se&&e.push("/")}),[ne,e,se,le]);var je=function(){if(!0===r){var t=e.location.state.studentProps._id;ne(F({_id:t,name:d,address:m,category:y,city:_,contact:L,fatherContact:G,image:M,roomNo:Y,blockNo:K,status:ee}))}else ne((n={name:d,address:m,category:y,city:_,contact:L,fatherContact:G,image:M,roomNo:Y,blockNo:K,status:ee},function(){var e=Object(j.a)(Object(l.a)().mark((function e(t,a){var r,c,s,o,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:O}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,R.a.post("".concat(D,"/student/addStudent"),n,s);case 6:o=e.sent,i=o.data,t({type:p,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:x,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));var n};return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(Le.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),re||ie?Object(ke.jsx)(De,{}):Object(ke.jsxs)(ke.Fragment,{children:[de&&Object(ke.jsx)(Ge,{variant:"danger",children:de}),Object(ke.jsxs)(st,{children:[Object(ke.jsx)("h1",{children:r?"Edit Student":"Add Student"}),re&&Object(ke.jsx)(De,{}),ce&&Object(ke.jsx)(Ge,{variant:"danger",children:ce}),Object(ke.jsx)($e.a,{onSubmit:je}),Object(ke.jsxs)($e.a.Group,{controlId:"name",children:[Object(ke.jsx)($e.a.Label,{children:"Name"}),Object(ke.jsx)($e.a.Control,{type:"name",placeholder:"Enter name",value:d,onChange:function(e){return u(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"status",children:[Object(ke.jsx)($e.a.Label,{children:"Status"}),Object(ke.jsx)($e.a.Control,{as:"select",value:ee,onChange:function(e){return te(e.target.value)},children:["Hostel","Outside","Home"].map((function(e){return Object(ke.jsx)("option",{value:e+1,children:e},e+1)}))})]}),Object(ke.jsxs)($e.a.Group,{controlId:"address",children:[Object(ke.jsx)($e.a.Label,{children:"Address"}),Object(ke.jsx)($e.a.Control,{type:"text",placeholder:"Enter address",value:m,onChange:function(e){return g(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"city",children:[Object(ke.jsx)($e.a.Label,{children:"City"}),Object(ke.jsx)($e.a.Control,{type:"text",placeholder:"Enter city",value:_,onChange:function(e){return C(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"contact",children:[Object(ke.jsx)($e.a.Label,{children:"Contact"}),Object(ke.jsx)($e.a.Control,{type:"number",placeholder:"Enter phone number",value:L,onChange:function(e){return k(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"fatherContact",children:[Object(ke.jsx)($e.a.Label,{children:"Father Contact"}),Object(ke.jsx)($e.a.Control,{type:"number",placeholder:"Enter Father Phone Number",value:G,onChange:function(e){return P(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"roomNo",children:[Object(ke.jsx)($e.a.Label,{children:"Room No"}),Object(ke.jsx)($e.a.Control,{type:"text",placeholder:"Enter Room no",value:Y,onChange:function(e){return V(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"b",children:[Object(ke.jsx)($e.a.Label,{children:"Block Number"}),Object(ke.jsx)($e.a.Control,{type:"text",placeholder:"Enter Block Number",value:K,onChange:function(e){return X(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"image",children:[Object(ke.jsx)($e.a.Label,{children:"Image Url"}),Object(ke.jsx)($e.a.Control,{type:"text",placeholder:"Enter Image Url",value:M,onChange:function(e){return Q(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"category",children:[Object(ke.jsx)($e.a.Label,{children:"Category"}),Object(ke.jsx)($e.a.Control,{type:"text",placeholder:"Enter Stream",value:y,onChange:function(e){return E(e.target.value)}})]}),Object(ke.jsx)(et.a,{type:"submit",variant:"primary",onClick:je,children:r?"Update":"Add Student"})]})]})]})},it=n(253),dt=n(133),lt=n.n(dt),jt=(n(173),function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:Oe}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.post("".concat(D,"/attendance/getAnalysis"),{date:e},s);case 6:o=t.sent,i=o.data,n({type:pe,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:xe,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}),ut=n(132),bt=function(){var e=Object(s.c)((function(e){return e.attendanceAnalysis})),t=e.loading,n=e.error,r=e.attendance,c=Object(a.useState)([]),o=Object(Ne.a)(c,2),i=o[0],d=o[1],l=Object(a.useState)([]),j=Object(Ne.a)(l,2),u=j[0],b=j[1];return Object(a.useEffect)((function(){if(r){b([{label:"Name",key:"name"},{label:"Contact",key:"contact"},{label:"Room No",key:"roomNo"},{label:"Status",key:"attendance"}]);var e=[];Object.entries(r.details).map((function(t){var n={};n.name=t[1].name,n.contact=t[1].contact,n.roomNo=t[1].roomNo,n.attendance=r.data[t[0]],e.push(n)})),d(e)}}),[r]),Object(ke.jsxs)(ke.Fragment,{children:[n&&Object(ke.jsx)(Ge,{variant:"danger",children:n}),t?Object(ke.jsx)(De,{}):Object(ke.jsx)(ke.Fragment,{children:r&&Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsxs)(Ye.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(ke.jsx)("thead",{children:Object(ke.jsxs)("tr",{children:[Object(ke.jsx)("th",{children:"Name"}),Object(ke.jsx)("th",{children:"Contact No"}),Object(ke.jsx)("th",{children:"Room No"}),Object(ke.jsx)("th",{children:"Attendance"})]})}),Object(ke.jsx)("tbody",{children:r&&Object.entries(r.details).map((function(e){return Object(ke.jsxs)("tr",{children:[Object(ke.jsx)("th",{children:e[1].name}),Object(ke.jsx)("td",{children:e[1].contact}),Object(ke.jsx)("td",{children:e[1].roomNo}),Object(ke.jsx)("td",{children:r.data[e[0]]})]},e[0])}))})]}),Object(ke.jsx)(ut.CSVLink,{data:i,headers:u,filename:"attendance_".concat(Date().toString().substring(0,15),".csv"),className:"btn btn-primary",children:"Download"})]})})]})},ht=function(){var e=Object(s.b)(),t=Object(a.useState)(!1),n=Object(Ne.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(0),i=Object(Ne.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)([]),h=Object(Ne.a)(b,2),O=h[0],p=h[1],x=Object(a.useState)(new Date),m=Object(Ne.a)(x,2),g=m[0],f=m[1],v=Object(s.c)((function(e){return e.attendanceAnalysis})).attendance,y=Object(s.c)((function(e){return e.attendanceDelete})),E=y.loading,S=y.success,T=y.error;Object(a.useEffect)((function(){if(v){var t=O;Object.entries(v.details).map((function(e){t.push(e[0])})),p(t)}else e(jt(g.toString().substring(0,15)))}),[v,e]);var N=function(){c(!1)};return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsxs)(Ie.a,{className:"flex justify-content-between",children:[Object(ke.jsx)(Le.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),Object(ke.jsx)("div",{style:{height:"40px",display:"flex"},children:Object(ke.jsx)(et.a,{variant:"outline-danger",size:"sm",onClick:function(){c(!0)},children:"Delete Attendance"})})]}),E&&Object(ke.jsx)(De,{}),T&&Object(ke.jsx)(Ge,{variant:"success",children:T}),S&&Object(ke.jsx)(Ge,{variant:"success",children:"Attendance Deleted"}),Object(ke.jsxs)(Ae.a,{children:[Object(ke.jsxs)(Ie.a,{children:[Object(ke.jsxs)(Ae.a,{children:[Object(ke.jsx)(Ie.a,{children:"Analysis for "}),Object(ke.jsx)("strong",{children:g.toISOString().toString().substring(0,10)})]}),Object(ke.jsx)(Ae.a,{children:Object(ke.jsx)(lt.a,{selected:g,onChange:function(t){return function(t){e(jt(t.toString().substring(0,15))),f(t)}(t)}})})]}),Object(ke.jsxs)(it.a,{show:r,animation:!0,onHide:N,children:[Object(ke.jsx)(it.a.Header,{closeButton:!0,children:Object(ke.jsx)(it.a.Title,{children:"Enter Number of days before to delete"})}),Object(ke.jsx)(it.a.Body,{children:Object(ke.jsx)($e.a,{children:Object(ke.jsxs)($e.a.Group,{controlId:"days",children:[Object(ke.jsx)($e.a.Label,{children:"Enter no of days"}),Object(ke.jsx)($e.a.Control,{type:"number",placeholder:"Enter days",value:d,onChange:function(e){return u(e.target.value)}})]})})}),Object(ke.jsxs)(it.a.Footer,{children:[Object(ke.jsx)(et.a,{variant:"secondary",onClick:N,children:"Close"}),Object(ke.jsx)(et.a,{variant:"outline-danger",onClick:function(){c(!1),e(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ge}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.delete("".concat(D,"/attendance/").concat(e),s);case 6:o=t.sent,i=o.data,n({type:fe,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:ve,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(d))},children:"Delete"})]})]}),Object(ke.jsx)(bt,{})]})]})},Ot=function(e){var t=e.location,n=e.history,r=Object(a.useState)(""),c=Object(Ne.a)(r,2),o=c[0],i=c[1],d=Object(a.useState)(""),u=Object(Ne.a)(d,2),b=u[0],h=u[1],O=Object(s.b)(),p=Object(s.c)((function(e){return e.userLogin})),x=p.loading,m=p.error,g=p.userInfo,f=t.search?t.search.split("=")[1]:"/";Object(a.useEffect)((function(){g&&n.push(f)}),[n,g,f]);return Object(ke.jsxs)(st,{children:[Object(ke.jsx)("h1",{children:"Sign In"}),m&&Object(ke.jsx)(Ge,{variant:"danger",children:m}),x&&Object(ke.jsx)(De,{}),Object(ke.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),O(function(e,t){return function(){var n=Object(j.a)(Object(l.a)().mark((function n(a){var r,c,s;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:P}),r={headers:{"Content-Type":"application/json"}},n.next=5,R.a.post("".concat(D,"/users/login"),{email:e,password:t},r);case 5:c=n.sent,s=c.data,a({type:B,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:z,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(o,b))},children:[Object(ke.jsxs)($e.a.Group,{controlId:"email",children:[Object(ke.jsx)($e.a.Label,{children:"Email Address"}),Object(ke.jsx)($e.a.Control,{type:"email",placeholder:"Enter email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"password",children:[Object(ke.jsx)($e.a.Label,{children:"Password"}),Object(ke.jsx)($e.a.Control,{type:"password",placeholder:"Enter password",value:b,onChange:function(e){return h(e.target.value)}})]}),Object(ke.jsx)(et.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(ke.jsx)(Ie.a,{className:"py-3",children:Object(ke.jsxs)(Ae.a,{children:["New Customer?"," ",Object(ke.jsx)(Le.Link,{to:f?"/register?redirect=".concat(f):"/register",children:"Register"})]})})]})},pt=function(e){var t=e.location,n=e.history,r=Object(a.useState)(""),c=Object(Ne.a)(r,2),o=c[0],i=c[1],d=Object(a.useState)(""),u=Object(Ne.a)(d,2),b=u[0],h=u[1],O=Object(a.useState)(""),p=Object(Ne.a)(O,2),x=p[0],m=p[1],g=Object(a.useState)(""),f=Object(Ne.a)(g,2),v=f[0],y=f[1],E=Object(a.useState)(null),S=Object(Ne.a)(E,2),T=S[0],N=S[1],_=Object(s.b)(),C=Object(s.c)((function(e){return e.userRegister})),I=C.loading,A=C.error,L=C.userInfo,k=t.search?t.search.split("=")[1]:"/";Object(a.useEffect)((function(){L&&n.push(k)}),[n,L,k]);return Object(ke.jsxs)(st,{children:[Object(ke.jsx)("h1",{children:"Sign Up"}),T&&Object(ke.jsx)(Ge,{variant:"danger",children:T}),A&&Object(ke.jsx)(Ge,{variant:"danger",children:A}),I&&Object(ke.jsx)(De,{}),Object(ke.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),x!==v?N("Passwords do not match"):_(function(e,t,n){return function(){var a=Object(j.a)(Object(l.a)().mark((function a(r){var c,s,o;return Object(l.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:Q}),c={headers:{"Content-Type":"application/json"}},a.next=5,R.a.post("".concat(D,"/users"),{name:e,email:t,password:n},c);case 5:s=a.sent,o=s.data,r({type:H,payload:o}),r({type:B,payload:o}),localStorage.setItem("userInfo",JSON.stringify(o)),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),r({type:J,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}(o,b,x))},children:[Object(ke.jsxs)($e.a.Group,{controlId:"name",children:[Object(ke.jsx)($e.a.Label,{children:"Name"}),Object(ke.jsx)($e.a.Control,{type:"name",placeholder:"Enter name",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"email",children:[Object(ke.jsx)($e.a.Label,{children:"Email Address"}),Object(ke.jsx)($e.a.Control,{type:"email",placeholder:"Enter email",value:b,onChange:function(e){return h(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"password",children:[Object(ke.jsx)($e.a.Label,{children:"Password"}),Object(ke.jsx)($e.a.Control,{type:"password",placeholder:"Enter password",value:x,onChange:function(e){return m(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"confirmPassword",children:[Object(ke.jsx)($e.a.Label,{children:"Confirm Password"}),Object(ke.jsx)($e.a.Control,{type:"password",placeholder:"Confirm password",value:v,onChange:function(e){return y(e.target.value)}})]}),Object(ke.jsx)(et.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(ke.jsx)(Ie.a,{className:"py-3",children:Object(ke.jsxs)(Ae.a,{children:["Have an Account?"," ",Object(ke.jsx)(Le.Link,{to:k?"/login?redirect=".concat(k):"/login",children:"Login"})]})})]})},xt=n(259),mt=function(e){var t=e.match,n=e.history,r=Object(a.useState)(""),c=Object(Ne.a)(r,2),o=c[0],i=c[1],d=Object(s.b)(),u=Object(s.c)((function(e){return e.studentDetails})),b=u.loading,h=u.error,O=u.student,p=Object(s.c)((function(e){return e.studentUpdate})),x=p.loading,v=p.error,y=p.success,E=Object(s.c)((function(e){return e.studentDelete})),C=E.loading,I=E.error,A=E.success;Object(a.useEffect)((function(){var e;A&&n.push("/"),y&&d({type:S}),O&&O._id&&O._id===t.params.id||d((e=t.params.id,function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:m}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.get("".concat(D,"/student/").concat(e),s);case 6:o=t.sent,i=o.data,n({type:g,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:f,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}())),O&&O._id&&!o&&i(O.status)}),[d,t,y,A]);return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(Le.Link,{className:"btn btn-light my-3",to:"/",children:"Go Back"}),b||x||C?Object(ke.jsx)(De,{}):h?Object(ke.jsx)(Ge,{variant:"danger",children:h}):Object(ke.jsxs)(ke.Fragment,{children:[v&&Object(ke.jsx)(Ge,{variant:"danger",children:v}),I&&Object(ke.jsx)(Ge,{variant:"danger",children:I}),O&&Object(ke.jsxs)(Ie.a,{children:[Object(ke.jsx)(Ae.a,{md:3,children:Object(ke.jsx)(Ce.a,{src:O.image,alt:O.name,fluid:!0})}),Object(ke.jsx)(Ae.a,{md:3,children:Object(ke.jsxs)(xt.a,{variant:"flush",children:[Object(ke.jsx)(xt.a.Item,{children:Object(ke.jsx)("h3",{children:O.name})}),Object(ke.jsx)(xt.a.Item,{children:Object(ke.jsxs)("span",{children:["Phone No:",O.contact]})}),Object(ke.jsx)(xt.a.Item,{children:Object(ke.jsxs)("span",{children:["Father Contact:",O.fatherContact]})}),Object(ke.jsx)(xt.a.Item,{children:Object(ke.jsxs)("span",{children:["City:",O.city]})}),Object(ke.jsx)(xt.a.Item,{children:Object(ke.jsxs)("span",{children:["Address:",O.address]})})]})}),Object(ke.jsx)(Ae.a,{md:4,children:Object(ke.jsx)(_e.a,{children:Object(ke.jsxs)(xt.a,{variant:"flush",children:[Object(ke.jsx)(xt.a.Item,{children:Object(ke.jsxs)(Ie.a,{children:[Object(ke.jsx)(Ae.a,{children:"Room No:"}),Object(ke.jsxs)(Ae.a,{children:[" ",O.roomNo]})]})}),Object(ke.jsx)(xt.a.Item,{children:Object(ke.jsxs)(Ie.a,{children:[Object(ke.jsx)(Ae.a,{children:"Block No:"}),Object(ke.jsxs)(Ae.a,{children:[" ",O.blockNo]})]})}),Object(ke.jsx)(xt.a.Item,{children:Object(ke.jsxs)(Ie.a,{children:[Object(ke.jsx)(Ae.a,{children:"Status:"}),Object(ke.jsx)(Ae.a,{children:Object(ke.jsx)($e.a.Control,{size:"sm",as:"select",value:o,onChange:function(e){return i(e.target.value)},children:["Hostel","Outside","Home"].map((function(e){return Object(ke.jsx)("option",{value:e,children:e},e)}))})})]})}),Object(ke.jsx)(xt.a.Item,{children:Object(ke.jsx)(et.a,{className:"btn-block",type:"button",onClick:function(){O.status=o,d(F(O))},children:"Update"})})]})})}),Object(ke.jsx)(Ae.a,{children:Object(ke.jsx)(xt.a,{variant:"flush",children:Object(ke.jsxs)(Ie.a,{children:[Object(ke.jsx)(xt.a.Item,{variant:"secondary",children:Object(ke.jsx)(et.a,{onClick:function(){n.push({pathname:"/student/edit/".concat(O._id),state:{studentProps:O}})},children:Object(ke.jsx)("i",{className:"fas fa-edit"})})}),Object(ke.jsx)(xt.a.Item,{children:Object(ke.jsx)(et.a,{variant:"danger",onClick:function(){var e;window.confirm("Are you sure")&&d((e=O._id,function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:T}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.delete("".concat(D,"/student/").concat(e),s);case 6:o=t.sent,i=o.data,n({type:N,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:_,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()))},children:Object(ke.jsx)("i",{className:"fas fa-trash"})})})]})})})]})]})]})},gt=function(e){var t=e.students,n=e.attendanceMap,r=e.setAttendanceMap,c=e.attendance,o=e.roomNo,i=Object(s.b)();Object(a.useEffect)((function(){}),[i,n]);return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsxs)(Ye.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(ke.jsx)("thead",{children:Object(ke.jsxs)("tr",{children:[Object(ke.jsx)("th",{children:"NAME"}),Object(ke.jsx)("th",{children:"Attendance"}),Object(ke.jsx)("th",{children:"STATUS"}),Object(ke.jsx)("th",{children:"CONTACT"}),Object(ke.jsx)("th",{children:"CITY"})]})}),Object(ke.jsx)("tbody",{children:t&&t.map((function(e){return Object(ke.jsx)(ke.Fragment,{children:Object(ke.jsxs)("tr",{children:[Object(ke.jsx)("td",{children:Object(ke.jsx)(Le.Link,{to:"/student/".concat(e._id),children:e.name})}),Object(ke.jsx)("td",{children:Object(ke.jsx)($e.a,{children:Object(ke.jsx)($e.a.Group,{controlId:"status",children:Object(ke.jsxs)($e.a.Control,{as:"select",size:"sm",defaultValue:n[e._id],onChange:function(t){var a=n;a[e._id]=t.target.value,r(a)},children:[Object(ke.jsx)("option",{children:"Hostel"}),Object(ke.jsx)("option",{children:"Home"}),Object(ke.jsx)("option",{children:"outside"})]})})})}),Object(ke.jsx)("td",{children:Object(ke.jsx)("span",{style:{color:"Outside"===e.status?"red":"Home"===e.status?"blue":"black"},children:e.status})}),Object(ke.jsx)("td",{children:Object(ke.jsx)("a",{href:"tel:".concat(e.contact),children:e.contact})}),Object(ke.jsx)("td",{children:e.city})]},e._id)})}))})]}),Object(ke.jsx)(et.a,{variant:"success",onClick:function(){c&&(c.roomNo.includes(o)||c.roomNo.push(o));var e=c?c.roomNo:o,a=n,r=c?c.details:{};t.map((function(e){r[e._id]={name:e.name,contact:e.contact,roomNo:e.roomNo}})),i(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:je}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.post("".concat(D,"/attendance/"),e,s);case 6:o=t.sent,i=o.data,n({type:ue,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:be,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}({roomNo:e,details:r,data:a}))},children:"Update Attendance"})]})},ft=function(e){var t=e.roomNo,n=Object(s.b)(),r=Object(a.useState)({}),c=Object(Ne.a)(r,2),o=c[0],i=c[1],d=Object(s.c)((function(e){return e.getStudentsByRoomNo})),l=d.loading,j=d.error,u=d.students,b=d.attendance,h=Object(s.c)((function(e){return e.attendanceDataEnter})),O=h.loading,p=h.error;Object(a.useEffect)((function(){u&&x()}),[n,b,o,u]);var x=function(){if(b){var e=o;u.map((function(t){b.data[t._id]?e[t._id]=b.data[t._id]:e[t._id]="Hostel"})),i(o)}else u.map((function(e){var t=o;t[e._id]="Hostel",i(t)}));i(o)};return Object(ke.jsxs)(ke.Fragment,{children:[j&&Object(ke.jsx)(Ge,{variant:"danger",children:j}),l||O?Object(ke.jsx)(De,{}):Object(ke.jsxs)(ke.Fragment,{children:[p&&Object(ke.jsx)(Ge,{variant:"danger",children:p}),u&&Object(ke.jsx)(ke.Fragment,{children:Object(ke.jsx)(gt,{students:u,attendanceMap:o,setAttendanceMap:i,attendance:b,roomNo:t})})]})]})},vt=function(){var e=Object(a.useState)(""),t=Object(Ne.a)(e,2),n=t[0],r=t[1],c=Object(s.b)();Object(a.useEffect)((function(){}),[c]);var o=function(e){e.preventDefault(),c(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:I}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.get("".concat(D,"/student/room/").concat(e),s);case 6:o=t.sent,i=o.data,n({type:A,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:L,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(n))};return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("h2",{children:"Take Attendance"}),Object(ke.jsxs)($e.a,{onSubmit:o,inline:!0,children:[Object(ke.jsx)($e.a.Control,{type:"text",value:n,name:"roomNo",placeholder:"Enter RoomNo",className:"mr-sm-2 ml-sm-5",onChange:function(e){return function(e){r(e.target.value)}(e)}}),Object(ke.jsx)(et.a,{type:"submit",onClick:o,children:"Get Students"})]}),Object(ke.jsx)(ft,{roomNo:n})]})},yt=function(e){var t=e.history,n=Object(a.useState)(""),r=Object(Ne.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(""),d=Object(Ne.a)(i,2),u=d[0],b=d[1],h=Object(a.useState)(""),O=Object(Ne.a)(h,2),p=O[0],x=O[1],m=Object(a.useState)(""),g=Object(Ne.a)(m,2),f=g[0],v=g[1],y=Object(a.useState)(null),E=Object(Ne.a)(y,2),S=E[0],T=E[1],N=Object(s.b)(),_=Object(s.c)((function(e){return e.userDetails})),C=_.loading,I=_.error,A=_.user,L=Object(s.c)((function(e){return e.userLogin})).userInfo,k=Object(s.c)((function(e){return e.userUpdateProfile})).success;Object(a.useEffect)((function(){L?A&&A.name&&!k?(o(A.name),b(A.email)):(N({type:$}),N(at("profile"))):t.push("/login")}),[N,t,L,A,k]);return Object(ke.jsx)(Ie.a,{children:Object(ke.jsxs)(Ae.a,{md:3,children:[Object(ke.jsx)("h2",{children:"Profile"}),S&&Object(ke.jsx)(Ge,{variant:"danger",children:S}),k&&Object(ke.jsx)(Ge,{variant:"success",children:"Profile Updated"}),C?Object(ke.jsx)(De,{}):I?Object(ke.jsx)(Ge,{variant:"danger",children:I}):Object(ke.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),p!==f?T("Passwords do not match"):N(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i,d;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:K}),r=a(),c=r.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.put("".concat(D,"/users/profile"),e,s);case 6:o=t.sent,i=o.data,n({type:X,payload:i}),n({type:B,payload:i}),localStorage.setItem("userInfo",JSON.stringify(i)),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(nt()),n({type:Z,payload:d});case 18:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()}({id:A._id,name:c,email:u,password:p}))},children:[Object(ke.jsxs)($e.a.Group,{controlId:"name",children:[Object(ke.jsx)($e.a.Label,{children:"Name"}),Object(ke.jsx)($e.a.Control,{type:"name",placeholder:"Enter name",value:c,onChange:function(e){return o(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"email",children:[Object(ke.jsx)($e.a.Label,{children:"Email Address"}),Object(ke.jsx)($e.a.Control,{type:"email",placeholder:"Enter email",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"password",children:[Object(ke.jsx)($e.a.Label,{children:"Password"}),Object(ke.jsx)($e.a.Control,{type:"password",placeholder:"Enter password",value:p,onChange:function(e){return x(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"confirmPassword",children:[Object(ke.jsx)($e.a.Label,{children:"Confirm Password"}),Object(ke.jsx)($e.a.Control,{type:"password",placeholder:"Confirm password",value:f,onChange:function(e){return v(e.target.value)}})]}),Object(ke.jsx)(et.a,{type:"submit",variant:"primary",children:"Update"})]})]})})},Et=function(e){var t=e.history,n=Object(s.b)(),r=Object(s.c)((function(e){return e.userList})),c=r.loading,o=r.error,i=r.users,d=Object(s.c)((function(e){return e.userLogin})).userInfo,u=Object(s.c)((function(e){return e.userDelete})).success;Object(a.useEffect)((function(){d&&d.isAdmin?n(function(){var e=Object(j.a)(Object(l.a)().mark((function e(t,n){var a,r,c,s,o,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:ee}),a=n(),r=a.userLogin.userInfo,c={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,R.a.get("".concat(D,"/users"),c);case 6:s=e.sent,o=s.data,t({type:te,payload:o}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),"Not authorized, token failed"===(i=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&t(nt()),t({type:ne,payload:i});case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()):t.push("/login")}),[n,t,u,d]);var b=function(e){window.confirm("Are you sure")&&n(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:re}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.delete("".concat(D,"/users/").concat(e),s);case 6:n({type:ce}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),"Not authorized, token failed"===(o=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(nt()),n({type:se,payload:o});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))};return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)("h1",{children:"Users"}),c?Object(ke.jsx)(De,{}):o?Object(ke.jsx)(Ge,{variant:"danger",children:o}):Object(ke.jsxs)(Ye.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(ke.jsx)("thead",{children:Object(ke.jsxs)("tr",{children:[Object(ke.jsx)("th",{children:"ID"}),Object(ke.jsx)("th",{children:"NAME"}),Object(ke.jsx)("th",{children:"EMAIL"}),Object(ke.jsx)("th",{children:"ADMIN"}),Object(ke.jsx)("th",{})]})}),Object(ke.jsx)("tbody",{children:i.map((function(e){return Object(ke.jsxs)("tr",{children:[Object(ke.jsx)("td",{children:e._id}),Object(ke.jsx)("td",{children:e.name}),Object(ke.jsx)("td",{children:Object(ke.jsx)("a",{href:"mailto:".concat(e.email),children:e.email})}),Object(ke.jsx)("td",{children:e.isAdmin?Object(ke.jsx)("i",{className:"fas fa-check",style:{color:"green"}}):Object(ke.jsx)("i",{className:"fas fa-times",style:{color:"red"}})}),Object(ke.jsxs)("td",{children:[Object(ke.jsx)(ze.LinkContainer,{to:"/user/".concat(e._id,"/edit"),children:Object(ke.jsx)(et.a,{variant:"light",className:"btn-sm",children:Object(ke.jsx)("i",{className:"fas fa-edit"})})}),Object(ke.jsx)(et.a,{variant:"danger",className:"btn-sm",onClick:function(){return b(e._id)},children:Object(ke.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]})]})},St=function(e){var t=e.match,n=e.history,r=t.params.userId,c=Object(a.useState)(""),o=Object(Ne.a)(c,2),i=o[0],d=o[1],u=Object(a.useState)(""),b=Object(Ne.a)(u,2),h=b[0],O=b[1],p=Object(a.useState)(!1),x=Object(Ne.a)(p,2),m=x[0],g=x[1],f=Object(s.b)(),v=Object(s.c)((function(e){return e.userDetails})),y=v.loading,E=v.error,S=v.user,T=Object(s.c)((function(e){return e.userUpdate})),N=T.loading,_=T.error,C=T.success;Object(a.useEffect)((function(){console.log(r),C?(f({type:le}),n.push("/userList")):S&&S.name&&S._id===r?(d(S.name),O(S.email),g(S.isAdmin)):f(at(r))}),[f,n,r,S,C]);return Object(ke.jsxs)(ke.Fragment,{children:[Object(ke.jsx)(Le.Link,{to:"/admin/userList",className:"btn btn-light my-3",children:"Go Back"}),Object(ke.jsxs)(st,{children:[Object(ke.jsx)("h1",{children:"Edit User"}),N&&Object(ke.jsx)(De,{}),_&&Object(ke.jsx)(Ge,{variant:"danger",children:_}),y?Object(ke.jsx)(De,{}):E?Object(ke.jsx)(Ge,{variant:"danger",children:E}):Object(ke.jsxs)($e.a,{onSubmit:function(e){e.preventDefault(),f(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i,d;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:oe}),r=a(),c=r.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.put("".concat(D,"/users/").concat(e._id),e,s);case 6:o=t.sent,i=o.data,n({type:ie}),n({type:V,payload:i}),n({type:W}),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(nt()),n({type:de,payload:d});case 18:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()}({_id:r,name:i,email:h,isAdmin:m}))},children:[Object(ke.jsxs)($e.a.Group,{controlId:"name",children:[Object(ke.jsx)($e.a.Label,{children:"Name"}),Object(ke.jsx)($e.a.Control,{type:"name",placeholder:"Enter name",value:i,onChange:function(e){return d(e.target.value)}})]}),Object(ke.jsxs)($e.a.Group,{controlId:"email",children:[Object(ke.jsx)($e.a.Label,{children:"Email Address"}),Object(ke.jsx)($e.a.Control,{type:"email",placeholder:"Enter email",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(ke.jsx)($e.a.Group,{controlId:"isadmin",children:Object(ke.jsx)($e.a.Check,{type:"checkbox",label:"Is Admin",checked:m,onChange:function(e){return g(e.target.checked)}})}),Object(ke.jsx)(et.a,{type:"submit",variant:"primary",children:"Update"})]})]})]})},Tt=function(){return Object(ke.jsxs)(Le.BrowserRouter,{children:[Object(ke.jsx)(rt,{}),Object(ke.jsx)("main",{className:"py-3",children:Object(ke.jsxs)(Qe.a,{children:[Object(ke.jsx)(We.d,{path:"/user/:userId/edit",component:St}),Object(ke.jsx)(We.d,{path:"/userList",component:Et}),Object(ke.jsx)(We.d,{path:"/profile",component:yt}),Object(ke.jsx)(We.d,{path:"/attendance",component:vt}),Object(ke.jsx)(We.d,{path:"/analysis",component:ht}),Object(ke.jsx)(We.d,{path:"/addStudent",component:ot}),Object(ke.jsx)(We.d,{path:"/student/edit/:id",component:ot,exact:!0}),Object(ke.jsx)(We.d,{path:"/student/:id",component:mt,exact:!0}),Object(ke.jsx)(We.d,{path:"/login",component:Ot,exact:!0}),Object(ke.jsx)(We.d,{path:"/register",component:pt,exact:!0}),Object(ke.jsx)(We.d,{path:"/search/:keyword",component:qe,exact:!0}),Object(ke.jsx)(We.d,{path:"/page/:pageNumber",component:qe,exact:!0}),Object(ke.jsx)(We.d,{path:"/search/:keyword/page/:pageNumber",component:qe,exact:!0}),Object(ke.jsx)(We.d,{path:"/",component:qe,exact:!0})]})}),Object(ke.jsx)(ct,{})]})},Nt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,260)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};n(234);c.a.render(Object(ke.jsx)(s.a,{store:Te,children:Object(ke.jsx)(Tt,{})}),document.getElementById("root")),Nt()}},[[236,1,2]]]);
//# sourceMappingURL=main.d60e0c26.chunk.js.map