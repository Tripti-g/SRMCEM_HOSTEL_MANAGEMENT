(this["webpackJsonphostel-app"]=this["webpackJsonphostel-app"]||[]).push([[0],{141:function(e,t,n){},234:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(24),c=n.n(r),s=(n(141),n(10)),o=n(64),i=n(130),d=n(129),l=n(13),j=n(21),u="STUDENT_LIST_REQUEST",b="STUDENT_LIST_SUCCESS",h="STUDENT_LIST_ERROR",O="STUDENT_ADD_REQUEST",p="STUDENT_ADD_SUCCESS",x="STUDENT_ADD_ERROR",m="STUDENT_DETAILS_REQUEST",g="STUDENT_DETAILS_SUCCESS",f="STUDENT_DETAILS_ERROR",v="STUDENT_UPDATE_REQUEST",y="STUDENT_UPDATE_SUCCESS",E="STUDENT_UPDATE_ERROR",S="STUDENT_UPDATE_RESET",T="STUDENT_DELETE_REQUEST",N="STUDENT_DELETE_SUCCESS",_="STUDENT_DELETE_ERROR",C="STUDENT_DELETE_RESET",I="STUDENT_ROOM_NO_REQUEST",A="STUDENT_ROOM_NO_SUCCESS",L="STUDENT_ROOM_NO_ERROR",k="STUDENT_ROOM_NO_RESET",U=n(22),R=n.n(U),D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var n=Object(j.a)(Object(l.a)().mark((function n(a,r){var c,s,o,i,d;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:u}),c=r(),s=c.userLogin.userInfo,o={headers:{Authorization:"Bearer ".concat(s.token)}},n.next=6,R.a.get("/student/all?keyword=".concat(e,"&pageNumber=").concat(t),o);case 6:i=n.sent,d=i.data,a({type:b,payload:d}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:h,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e,t){return n.apply(this,arguments)}}()},w=function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:v}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.put("/student/".concat(e._id),e,s);case 6:o=t.sent,i=o.data,n({type:y,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:E,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},F=n(17),G="USER_LOGIN_REQUEST",P="USER_LOGIN_SUCCESS",B="USER_LOGIN_FAIL",z="USER_LOGOUT",M="USER_REGISTER_REQUEST",Q="USER_REGISTER_SUCCESS",H="USER_REGISTER_FAIL",J="USER_DETAILS_REQUEST",Y="USER_DETAILS_SUCCESS",V="USER_DETAILS_FAIL",q="USER_DETAILS_RESET",W="USER_UPDATE_PROFILE_REQUEST",K="USER_UPDATE_PROFILE_SUCCESS",X="USER_UPDATE_PROFILE_FAIL",Z="USER_UPDATE_PROFILE_RESET",$="USER_LIST_REQUEST",ee="USER_LIST_SUCCESS",te="USER_LIST_FAIL",ne="USER_LIST_RESET",ae="USER_DELETE_REQUEST",re="USER_DELETE_SUCCESS",ce="USER_DELETE_FAIL",se="USER_UPDATE_REQUEST",oe="USER_UPDATE_SUCCESS",ie="USER_UPDATE_FAIL",de="USER_UPDATE_RESET",le="ATTENDANCE_DATA_ENTER_REQUEST",je="ATTENDANCE_DATA_ENTER_SUCCESS",ue="ATTENDANCE_DATA_ENTER_FAIL",be="ATTENDANCE_DATA_ENTER_RESET",he="ATTENDANCE_ANALYSIS_REQUEST",Oe="ATTENDANCE_ANALYSIS_SUCCESS",pe="ATTENDANCE_ANALYSIS_FAIL",xe="ATTENDANCE_ANALYSIS_RESET",me="ATTENDANCE_DELETE_REQUEST",ge="ATTENDANCE_DELETE_SUCCESS",fe="ATTENDANCE_DELETE_FAIL",ve=Object(o.combineReducers)({studentsList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{students:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case u:return Object(F.a)(Object(F.a)({},e),{},{loading:!0});case b:return{loading:!1,students:t.payload.students,pages:t.payload.pages,page:t.payload.page};case h:return{loading:!1,error:t.payload};default:return e}},studentDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(F.a)(Object(F.a)({},e),{},{loading:!0});case g:return{loading:!1,student:t.payload};case f:return{loading:!1,error:t.payload};default:return e}},studentAdd:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{students:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return Object(F.a)(Object(F.a)({},e),{},{loading:!0});case p:return{loading:!1,success:!0};case x:return{loading:!1,error:t.payload};default:return e}},studentUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(F.a)(Object(F.a)({},e),{},{loading:!0});case y:return{loading:!1,success:!0};case E:return{loading:!1,error:t.payload};case S:return{};default:return e}},studentDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case T:return Object(F.a)(Object(F.a)({},e),{},{loading:!0});case N:return{loading:!1,success:!0};case _:return{loading:!1,error:t.payload};case C:return{};default:return e}},getStudentsByRoomNo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(F.a)(Object(F.a)({},e),{},{loading:!0});case A:return{loading:!1,students:t.payload.students,attendance:t.payload.attendance};case L:return{loading:!1,error:t.payload};case k:return{};default:return e}},userLogin:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case G:return{loading:!0};case P:return{loading:!1,userInfo:t.payload};case B:return{loading:!1,error:t.payload};case z:return{};default:return e}},userRegister:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return{loading:!0};case Q:return{loading:!1,userInfo:t.payload};case H:return{loading:!1,error:t.payload};case z:return{};default:return e}},userDetails:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object(F.a)(Object(F.a)({},e),{},{loading:!0});case Y:return{loading:!1,user:t.payload};case V:return{loading:!1,error:t.payload};case q:return{user:{}};default:return e}},userUpdateProfile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case W:return{loading:!0};case K:return{loading:!1,success:!0,userInfo:t.payload};case X:return{loading:!1,error:t.payload};case Z:return{};default:return e}},userList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{users:[]},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case $:return{loading:!0};case ee:return{loading:!1,users:t.payload};case te:return{loading:!1,error:t.payload};case ne:return{users:[]};default:return e}},userDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ae:return{loading:!0};case re:return{loading:!1,success:!0};case ce:return{loading:!1,error:t.payload};default:return e}},userUpdate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{user:{}},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case se:return{loading:!0};case oe:return{loading:!1,success:!0};case ie:return{loading:!1,error:t.payload};case de:return{user:{}};default:return e}},attendanceDataEnter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case le:return Object(F.a)(Object(F.a)({},e),{},{loading:!0});case je:return{loading:!1,attendance:t.payload};case ue:return{loading:!1,error:t.payload};case be:return{};default:return e}},attendanceAnalysis:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:return{loading:!0};case Oe:return{loading:!1,attendance:t.payload};case pe:return{loading:!1,error:t.payload};case xe:return{};default:return e}},attendanceDelete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case me:return{loading:!0};case ge:return{loading:!1,success:!0};case fe:return{loading:!1,error:t.payload};case xe:return{};default:return e}}}),ye={userLogin:{userInfo:localStorage.getItem("userInfo")?JSON.parse(localStorage.getItem("userInfo")):null}},Ee=[i.a],Se=Object(o.createStore)(ve,ye,Object(d.composeWithDevTools)(o.applyMiddleware.apply(void 0,Ee))),Te=n(11),Ne=n(256),_e=n(244),Ce=n(245),Ie=n(131),Ae=n(16),Le=n(1),ke=function(e){var t=e.stuentDetails;return Object(Le.jsxs)(Ne.a,{className:"my-3 p-3 rounded",children:[Object(Le.jsx)(Ae.Link,{to:"/student/".concat(t._id),children:Object(Le.jsx)(_e.a,{src:t.image,rounded:!0,fluid:!0})}),Object(Le.jsxs)(Ne.a.Body,{children:[Object(Le.jsx)(Ae.Link,{to:"/student/".concat(t._id),children:Object(Le.jsx)(Ne.a.Title,{as:"div",children:Object(Le.jsx)("strong",{children:t.name})})}),Object(Le.jsx)(Ce.a,{children:Object(Le.jsxs)(Ie.a,{children:["Room No: ",t.roomNo]})}),Object(Le.jsx)(Ce.a,{children:Object(Le.jsxs)(Ie.a,{children:["Stream: ",t.category]})}),Object(Le.jsxs)(Ne.a.Text,{children:["Contact:",Object(Le.jsx)("a",{href:"tel:".concat(t.contact),children:t.contact})]})]})]})},Ue=n(246),Re=function(){return Object(Le.jsx)(Ue.a,{animation:"border",role:"status",style:{width:"100px",height:"100px",margin:"auto",display:"block"},children:Object(Le.jsx)("span",{className:"sr-only",children:"Loading..."})})},De=n(247),we=function(e){var t=e.variant,n=e.children;return Object(Le.jsx)(De.a,{variant:t,children:n})};we.defaultProps={variant:"info"};var Fe=we,Ge=n(136),Pe=n(257),Be=n(34),ze=function(e){var t=e.pages,n=e.page,a=e.isAdmin,r=void 0!==a&&a,c=e.keyword,s=void 0===c?"":c;return t>1&&Object(Le.jsx)(Pe.a,{children:Object(Ge.a)(Array(t).keys()).map((function(e){return Object(Le.jsx)(Be.LinkContainer,{to:r?"/page/".concat(e+1):s?"/search/".concat(s,"/page/").concat(e+1):"/page/".concat(e+1),children:Object(Le.jsx)(Pe.a.Item,{active:e+1===n,children:e+1})},e+1)}))})},Me=n(249),Qe=n(250),He=n(251),Je=n(248),Ye=function(e){var t=e.keyword,n=e.pageNumber,r=Object(s.b)(),c=Object(s.c)((function(e){return e.studentsList})),o=c.loading,i=c.error,d=c.students,l=c.page,j=c.pages;return Object(a.useEffect)((function(){d||r(D(t,n))}),[r,t,n]),Object(Le.jsx)(Le.Fragment,{children:o?Object(Le.jsx)(Re,{}):i?Object(Le.jsx)(Fe,{variant:"danger",children:i}):Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)(Je.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(Le.jsx)("thead",{children:Object(Le.jsxs)("tr",{children:[Object(Le.jsx)("th",{children:"Stream"}),Object(Le.jsx)("th",{children:"NAME"}),Object(Le.jsx)("th",{children:"STATUS"}),Object(Le.jsx)("th",{children:"CONTACT"}),Object(Le.jsx)("th",{children:"ROOM NO"}),Object(Le.jsx)("th",{children:"CITY"})]})}),Object(Le.jsx)("tbody",{children:d.map((function(e){return Object(Le.jsxs)("tr",{children:[Object(Le.jsx)("td",{children:e.category}),Object(Le.jsx)("td",{children:Object(Le.jsx)(Ae.Link,{to:"/student/".concat(e._id),children:e.name})}),Object(Le.jsx)("td",{children:Object(Le.jsx)("span",{style:{color:"Outside"===e.status?"red":"Home"===e.status?"blue":"black"},children:e.status})}),Object(Le.jsx)("td",{children:Object(Le.jsx)("a",{href:"tel:".concat(e.contact),children:e.contact})}),Object(Le.jsx)("td",{children:e.roomNo}),Object(Le.jsx)("td",{children:e.city})]},e._id)}))})]}),Object(Le.jsx)(ze,{pages:j,page:l,isAdmin:!0})]})})},Ve=function(e){var t=e.match,n=e.history,r=Object(a.useState)(!0),c=Object(Te.a)(r,2),o=c[0],i=c[1],d=t.params.keyword,l=t.params.pageNumber||1,j=Object(s.c)((function(e){return e.userLogin})),u=j.loading,b=j.userInfo,h=Object(s.b)(),O=Object(s.c)((function(e){return e.studentsList})),p=O.loading,x=O.error,m=O.students,g=O.page,f=O.pages;return Object(a.useEffect)((function(){u||b||n.push("/login"),h(D(d,l))}),[d,l]),Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Le.Fragment,{children:Object(Le.jsx)(Me.a,{children:Object(Le.jsxs)(Ce.a,{className:"justify-content-md-center",children:[Object(Le.jsx)(Ie.a,{xs:!0,lg:"2"}),Object(Le.jsx)(Ie.a,{md:"auto",children:Object(Le.jsx)(Qe.a,{toggle:!0,children:["Grid","Table"].map((function(e){return Object(Le.jsx)(He.a,{type:"radio",variant:"secondary",name:"radio",value:e,checked:(o?"Grid":"Table")===e,onChange:function(e){return i("Grid"===e.target.value)},children:"Grid"===e?Object(Le.jsx)(Le.Fragment,{children:" Grid"}):Object(Le.jsx)(Le.Fragment,{children:" Table "})},e)}))})}),Object(Le.jsx)(Ie.a,{xs:!0,lg:"2"})]})})}),Object(Le.jsx)("h1",{children:"Students"}),p?Object(Le.jsx)(Re,{}):x?Object(Le.jsx)(Fe,{variant:"danger",children:x}):o?Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Ce.a,{children:m.map((function(e){return Object(Le.jsx)(Ie.a,{sm:12,md:6,lg:4,xl:3,children:Object(Le.jsx)(ke,{stuentDetails:e})},e._id)}))}),Object(Le.jsx)(ze,{pages:f,page:g,keyword:d||""})]}):Object(Le.jsx)(Le.Fragment,{children:Object(Le.jsx)(Ye,{keyword:d,pageNumber:l})})]})},qe=n(20),We=n(255),Ke=n(258),Xe=n(252),Ze=n(254),$e=n(76),et=function(e){var t=e.history,n=Object(a.useState)(""),r=Object(Te.a)(n,2),c=r[0],s=r[1];return Object(Le.jsxs)(Ze.a,{onSubmit:function(e){e.preventDefault(),c.trim()?t.push("/search/".concat(c)):t.push("/")},inline:!0,children:[Object(Le.jsx)(Ze.a.Control,{type:"text",value:c,name:"q",placeholder:"Search students...",className:"mr-sm-2 ml-sm-5",onChange:function(e){return s(e.target.value)}}),Object(Le.jsx)($e.a,{className:"p-2",type:"submit",variant:"outline-success",children:"Search"})]})},tt=function(){return function(e){localStorage.removeItem("userInfo"),e({type:z}),e({type:q}),e({type:ne}),document.location.href="/login"}},nt=function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i,d;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:J}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.get("/users/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:Y,payload:i}),t.next=16;break;case 11:t.prev=11,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(tt()),n({type:V,payload:d});case 16:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()},at=function(e){var t=e.history,n=Object(s.b)(),a=Object(s.c)((function(e){return e.userLogin})).userInfo;return Object(Le.jsx)("header",{children:Object(Le.jsx)(We.a,{bg:"dark",variant:"dark",expand:"lg",collapseOnSelect:!0,children:Object(Le.jsxs)(Me.a,{children:[Object(Le.jsx)(Be.LinkContainer,{to:"/",children:Object(Le.jsx)(We.a.Brand,{children:"SRMCEM Hostel Portal"})}),Object(Le.jsx)(We.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(Le.jsxs)(We.a.Collapse,{id:"basic-navbar-nav",children:[Object(Le.jsx)(qe.d,{render:function(e){var t=e.history;return Object(Le.jsx)(et,{history:t})}}),Object(Le.jsxs)(Ke.a,{className:"ml-auto",children:[Object(Le.jsxs)(Xe.a,{title:"More",children:[Object(Le.jsx)(Be.LinkContainer,{to:"/attendance",children:Object(Le.jsx)(Xe.a.Item,{children:"Attendance"})}),Object(Le.jsx)(Be.LinkContainer,{to:"/addStudent",children:Object(Le.jsx)(Xe.a.Item,{children:"Add Student"})}),Object(Le.jsx)(Be.LinkContainer,{to:"/analysis",children:Object(Le.jsx)(Xe.a.Item,{children:"View Analysis"})})]}),a?Object(Le.jsxs)(Xe.a,{title:a.name,id:"username",children:[Object(Le.jsx)(Be.LinkContainer,{to:"/profile",children:Object(Le.jsx)(Xe.a.Item,{children:"Profile"})}),a.isAdmin&&Object(Le.jsx)(Be.LinkContainer,{to:"/userList",children:Object(Le.jsx)(Xe.a.Item,{children:"Users List"})}),Object(Le.jsx)(Xe.a.Item,{onClick:function(){n(tt()),t.push("/login")},children:"Logout"})]}):Object(Le.jsx)(Be.LinkContainer,{to:"/login",children:Object(Le.jsxs)(Ke.a.Link,{children:[Object(Le.jsx)("i",{className:"fas fa-user"})," Sign In"]})})]})]})]})})})},rt=function(){return Object(Le.jsx)("div",{style:{height:"40px",backgroundColor:"#313331",width:"100%"}})},ct=function(e){var t=e.children;return Object(Le.jsx)(Me.a,{children:Object(Le.jsx)(Ce.a,{className:"justify-content-md-center",children:Object(Le.jsx)(Ie.a,{xs:12,md:6,children:t})})})},st=function(){var e=Object(qe.k)(),t=Object(a.useState)(!1),n=Object(Te.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(""),i=Object(Te.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)(""),h=Object(Te.a)(b,2),m=h[0],g=h[1],f=Object(a.useState)(""),v=Object(Te.a)(f,2),y=v[0],E=v[1],T=Object(a.useState)(""),N=Object(Te.a)(T,2),_=N[0],C=N[1],I=Object(a.useState)(""),A=Object(Te.a)(I,2),L=A[0],k=A[1],U=Object(a.useState)(""),D=Object(Te.a)(U,2),F=D[0],G=D[1],P=Object(a.useState)(""),B=Object(Te.a)(P,2),z=B[0],M=B[1],Q=Object(a.useState)(""),H=Object(Te.a)(Q,2),J=H[0],Y=H[1],V=Object(a.useState)(""),q=Object(Te.a)(V,2),W=q[0],K=q[1],X=Object(a.useState)("Hostel"),Z=Object(Te.a)(X,2),$=Z[0],ee=Z[1],te=Object(s.b)(),ne=Object(s.c)((function(e){return e.studentAdd})),ae=ne.loading,re=ne.error,ce=ne.success,se=Object(s.c)((function(e){return e.studentUpdate})),oe=se.loading,ie=se.error,de=se.success;Object(a.useEffect)((function(){if(de&&(te({type:S}),e.push("/")),e.location.state&&e.location.state.studentProps){c(!0);var t=e.location.state.studentProps;u(t.name),g(t.address),E(t.category),C(t.city),k(t.contact),G(t.fatherContact),M(t.image),Y(t.roomNo),K(t.blockNo),ee(t.status)}ce&&e.push("/")}),[te,e,ce,de]);var le=function(){if(!0===r){var t=e.location.state.studentProps._id;te(w({_id:t,name:d,address:m,category:y,city:_,contact:L,fatherContact:F,image:z,roomNo:J,blockNo:W,status:$}))}else te((n={name:d,address:m,category:y,city:_,contact:L,fatherContact:F,image:z,roomNo:J,blockNo:W,status:$},function(){var e=Object(j.a)(Object(l.a)().mark((function e(t,a){var r,c,s,o,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:O}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},e.next=6,R.a.post("/student/addStudent",n,s);case 6:o=e.sent,i=o.data,t({type:p,payload:i}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),t({type:x,payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message});case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()));var n};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Ae.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),ae||oe?Object(Le.jsx)(Re,{}):Object(Le.jsxs)(Le.Fragment,{children:[ie&&Object(Le.jsx)(Fe,{variant:"danger",children:ie}),Object(Le.jsxs)(ct,{children:[Object(Le.jsx)("h1",{children:r?"Edit Student":"Add Student"}),ae&&Object(Le.jsx)(Re,{}),re&&Object(Le.jsx)(Fe,{variant:"danger",children:re}),Object(Le.jsx)(Ze.a,{onSubmit:le}),Object(Le.jsxs)(Ze.a.Group,{controlId:"name",children:[Object(Le.jsx)(Ze.a.Label,{children:"Name"}),Object(Le.jsx)(Ze.a.Control,{type:"name",placeholder:"Enter name",value:d,onChange:function(e){return u(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"status",children:[Object(Le.jsx)(Ze.a.Label,{children:"Status"}),Object(Le.jsx)(Ze.a.Control,{as:"select",value:$,onChange:function(e){return ee(e.target.value)},children:["Hostel","Outside","Home"].map((function(e){return Object(Le.jsx)("option",{value:e+1,children:e},e+1)}))})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"address",children:[Object(Le.jsx)(Ze.a.Label,{children:"Address"}),Object(Le.jsx)(Ze.a.Control,{type:"text",placeholder:"Enter address",value:m,onChange:function(e){return g(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"city",children:[Object(Le.jsx)(Ze.a.Label,{children:"City"}),Object(Le.jsx)(Ze.a.Control,{type:"text",placeholder:"Enter city",value:_,onChange:function(e){return C(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"contact",children:[Object(Le.jsx)(Ze.a.Label,{children:"Contact"}),Object(Le.jsx)(Ze.a.Control,{type:"number",placeholder:"Enter phone number",value:L,onChange:function(e){return k(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"fatherContact",children:[Object(Le.jsx)(Ze.a.Label,{children:"Father Contact"}),Object(Le.jsx)(Ze.a.Control,{type:"number",placeholder:"Enter Father Phone Number",value:F,onChange:function(e){return G(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"roomNo",children:[Object(Le.jsx)(Ze.a.Label,{children:"Room No"}),Object(Le.jsx)(Ze.a.Control,{type:"text",placeholder:"Enter Room no",value:J,onChange:function(e){return Y(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"b",children:[Object(Le.jsx)(Ze.a.Label,{children:"Block Number"}),Object(Le.jsx)(Ze.a.Control,{type:"text",placeholder:"Enter Block Number",value:W,onChange:function(e){return K(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"image",children:[Object(Le.jsx)(Ze.a.Label,{children:"Image Url"}),Object(Le.jsx)(Ze.a.Control,{type:"text",placeholder:"Enter Image Url",value:z,onChange:function(e){return M(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"category",children:[Object(Le.jsx)(Ze.a.Label,{children:"Category"}),Object(Le.jsx)(Ze.a.Control,{type:"text",placeholder:"Enter Stream",value:y,onChange:function(e){return E(e.target.value)}})]}),Object(Le.jsx)($e.a,{type:"submit",variant:"primary",onClick:le,children:r?"Update":"Add Student"})]})]})]})},ot=n(253),it=n(133),dt=n.n(it),lt=(n(173),function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:he}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.post("/attendance/getAnalysis",{date:e},s);case 6:o=t.sent,i=o.data,n({type:Oe,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:pe,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}),jt=n(132),ut=function(){var e=Object(s.c)((function(e){return e.attendanceAnalysis})),t=e.loading,n=e.error,r=e.attendance,c=Object(a.useState)([]),o=Object(Te.a)(c,2),i=o[0],d=o[1],l=Object(a.useState)([]),j=Object(Te.a)(l,2),u=j[0],b=j[1];return Object(a.useEffect)((function(){if(r){b([{label:"Name",key:"name"},{label:"Contact",key:"contact"},{label:"Room No",key:"roomNo"},{label:"Status",key:"attendance"}]);var e=[];Object.entries(r.details).map((function(t){var n={};n.name=t[1].name,n.contact=t[1].contact,n.roomNo=t[1].roomNo,n.attendance=r.data[t[0]],e.push(n)})),d(e)}}),[r]),Object(Le.jsxs)(Le.Fragment,{children:[n&&Object(Le.jsx)(Fe,{variant:"danger",children:n}),t?Object(Le.jsx)(Re,{}):Object(Le.jsx)(Le.Fragment,{children:r&&Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)(Je.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(Le.jsx)("thead",{children:Object(Le.jsxs)("tr",{children:[Object(Le.jsx)("th",{children:"Name"}),Object(Le.jsx)("th",{children:"Contact No"}),Object(Le.jsx)("th",{children:"Room No"}),Object(Le.jsx)("th",{children:"Attendance"})]})}),Object(Le.jsx)("tbody",{children:r&&Object.entries(r.details).map((function(e){return Object(Le.jsxs)("tr",{children:[Object(Le.jsx)("th",{children:e[1].name}),Object(Le.jsx)("td",{children:e[1].contact}),Object(Le.jsx)("td",{children:e[1].roomNo}),Object(Le.jsx)("td",{children:r.data[e[0]]})]},e[0])}))})]}),Object(Le.jsx)(jt.CSVLink,{data:i,headers:u,filename:"attendance_".concat(Date().toString().substring(0,15),".csv"),className:"btn btn-primary",children:"Download"})]})})]})},bt=function(){var e=Object(s.b)(),t=Object(a.useState)(!1),n=Object(Te.a)(t,2),r=n[0],c=n[1],o=Object(a.useState)(0),i=Object(Te.a)(o,2),d=i[0],u=i[1],b=Object(a.useState)([]),h=Object(Te.a)(b,2),O=h[0],p=h[1],x=Object(a.useState)(new Date),m=Object(Te.a)(x,2),g=m[0],f=m[1],v=Object(s.c)((function(e){return e.attendanceAnalysis})).attendance,y=Object(s.c)((function(e){return e.attendanceDelete})),E=y.loading,S=y.success,T=y.error;Object(a.useEffect)((function(){if(v){var t=O;Object.entries(v.details).map((function(e){t.push(e[0])})),p(t)}else e(lt(g.toString().substring(0,15)))}),[v,e]);var N=function(){c(!1)};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)(Ce.a,{className:"flex justify-content-between",children:[Object(Le.jsx)(Ae.Link,{to:"/",className:"btn btn-light my-3",children:"Go Back"}),Object(Le.jsx)("div",{style:{height:"40px",display:"flex"},children:Object(Le.jsx)($e.a,{variant:"outline-danger",size:"sm",onClick:function(){c(!0)},children:"Delete Attendance"})})]}),E&&Object(Le.jsx)(Re,{}),T&&Object(Le.jsx)(Fe,{variant:"success",children:T}),S&&Object(Le.jsx)(Fe,{variant:"success",children:"Attendance Deleted"}),Object(Le.jsxs)(Ie.a,{children:[Object(Le.jsxs)(Ce.a,{children:[Object(Le.jsxs)(Ie.a,{children:[Object(Le.jsx)(Ce.a,{children:"Analysis for "}),Object(Le.jsx)("strong",{children:g.toISOString().toString().substring(0,10)})]}),Object(Le.jsx)(Ie.a,{children:Object(Le.jsx)(dt.a,{selected:g,onChange:function(t){return function(t){e(lt(t.toString().substring(0,15))),f(t)}(t)}})})]}),Object(Le.jsxs)(ot.a,{show:r,animation:!0,onHide:N,children:[Object(Le.jsx)(ot.a.Header,{closeButton:!0,children:Object(Le.jsx)(ot.a.Title,{children:"Enter Number of days before to delete"})}),Object(Le.jsx)(ot.a.Body,{children:Object(Le.jsx)(Ze.a,{children:Object(Le.jsxs)(Ze.a.Group,{controlId:"days",children:[Object(Le.jsx)(Ze.a.Label,{children:"Enter no of days"}),Object(Le.jsx)(Ze.a.Control,{type:"number",placeholder:"Enter days",value:d,onChange:function(e){return u(e.target.value)}})]})})}),Object(Le.jsxs)(ot.a.Footer,{children:[Object(Le.jsx)($e.a,{variant:"secondary",onClick:N,children:"Close"}),Object(Le.jsx)($e.a,{variant:"outline-danger",onClick:function(){c(!1),e(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:me}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.delete("/attendance/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:ge,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:fe,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(d))},children:"Delete"})]})]}),Object(Le.jsx)(ut,{})]})]})},ht=function(e){var t=e.location,n=e.history,r=Object(a.useState)(""),c=Object(Te.a)(r,2),o=c[0],i=c[1],d=Object(a.useState)(""),u=Object(Te.a)(d,2),b=u[0],h=u[1],O=Object(s.b)(),p=Object(s.c)((function(e){return e.userLogin})),x=p.loading,m=p.error,g=p.userInfo,f=t.search?t.search.split("=")[1]:"/";Object(a.useEffect)((function(){g&&n.push(f)}),[n,g,f]);return Object(Le.jsxs)(ct,{children:[Object(Le.jsx)("h1",{children:"Sign In"}),m&&Object(Le.jsx)(Fe,{variant:"danger",children:m}),x&&Object(Le.jsx)(Re,{}),Object(Le.jsxs)(Ze.a,{onSubmit:function(e){e.preventDefault(),O(function(e,t){return function(){var n=Object(j.a)(Object(l.a)().mark((function n(a){var r,c,s;return Object(l.a)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:G}),r={headers:{"Content-Type":"application/json"}},n.next=5,R.a.post("/users/login",{email:e,password:t},r);case 5:c=n.sent,s=c.data,a({type:P,payload:s}),localStorage.setItem("userInfo",JSON.stringify(s)),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:B,payload:n.t0.response&&n.t0.response.data.message?n.t0.response.data.message:n.t0.message});case 14:case"end":return n.stop()}}),n,null,[[0,11]])})));return function(e){return n.apply(this,arguments)}}()}(o,b))},children:[Object(Le.jsxs)(Ze.a.Group,{controlId:"email",children:[Object(Le.jsx)(Ze.a.Label,{children:"Email Address"}),Object(Le.jsx)(Ze.a.Control,{type:"email",placeholder:"Enter email",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"password",children:[Object(Le.jsx)(Ze.a.Label,{children:"Password"}),Object(Le.jsx)(Ze.a.Control,{type:"password",placeholder:"Enter password",value:b,onChange:function(e){return h(e.target.value)}})]}),Object(Le.jsx)($e.a,{type:"submit",variant:"primary",children:"Sign In"})]}),Object(Le.jsx)(Ce.a,{className:"py-3",children:Object(Le.jsxs)(Ie.a,{children:["New Customer?"," ",Object(Le.jsx)(Ae.Link,{to:f?"/register?redirect=".concat(f):"/register",children:"Register"})]})})]})},Ot=function(e){var t=e.location,n=e.history,r=Object(a.useState)(""),c=Object(Te.a)(r,2),o=c[0],i=c[1],d=Object(a.useState)(""),u=Object(Te.a)(d,2),b=u[0],h=u[1],O=Object(a.useState)(""),p=Object(Te.a)(O,2),x=p[0],m=p[1],g=Object(a.useState)(""),f=Object(Te.a)(g,2),v=f[0],y=f[1],E=Object(a.useState)(null),S=Object(Te.a)(E,2),T=S[0],N=S[1],_=Object(s.b)(),C=Object(s.c)((function(e){return e.userRegister})),I=C.loading,A=C.error,L=C.userInfo,k=t.search?t.search.split("=")[1]:"/";Object(a.useEffect)((function(){L&&n.push(k)}),[n,L,k]);return Object(Le.jsxs)(ct,{children:[Object(Le.jsx)("h1",{children:"Sign Up"}),T&&Object(Le.jsx)(Fe,{variant:"danger",children:T}),A&&Object(Le.jsx)(Fe,{variant:"danger",children:A}),I&&Object(Le.jsx)(Re,{}),Object(Le.jsxs)(Ze.a,{onSubmit:function(e){e.preventDefault(),x!==v?N("Passwords do not match"):_(function(e,t,n){return function(){var a=Object(j.a)(Object(l.a)().mark((function a(r){var c,s,o;return Object(l.a)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,r({type:M}),c={headers:{"Content-Type":"application/json"}},a.next=5,R.a.post("/users",{name:e,email:t,password:n},c);case 5:s=a.sent,o=s.data,r({type:Q,payload:o}),r({type:P,payload:o}),localStorage.setItem("userInfo",JSON.stringify(o)),a.next=15;break;case 12:a.prev=12,a.t0=a.catch(0),r({type:H,payload:a.t0.response&&a.t0.response.data.message?a.t0.response.data.message:a.t0.message});case 15:case"end":return a.stop()}}),a,null,[[0,12]])})));return function(e){return a.apply(this,arguments)}}()}(o,b,x))},children:[Object(Le.jsxs)(Ze.a.Group,{controlId:"name",children:[Object(Le.jsx)(Ze.a.Label,{children:"Name"}),Object(Le.jsx)(Ze.a.Control,{type:"name",placeholder:"Enter name",value:o,onChange:function(e){return i(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"email",children:[Object(Le.jsx)(Ze.a.Label,{children:"Email Address"}),Object(Le.jsx)(Ze.a.Control,{type:"email",placeholder:"Enter email",value:b,onChange:function(e){return h(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"password",children:[Object(Le.jsx)(Ze.a.Label,{children:"Password"}),Object(Le.jsx)(Ze.a.Control,{type:"password",placeholder:"Enter password",value:x,onChange:function(e){return m(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"confirmPassword",children:[Object(Le.jsx)(Ze.a.Label,{children:"Confirm Password"}),Object(Le.jsx)(Ze.a.Control,{type:"password",placeholder:"Confirm password",value:v,onChange:function(e){return y(e.target.value)}})]}),Object(Le.jsx)($e.a,{type:"submit",variant:"primary",children:"Register"})]}),Object(Le.jsx)(Ce.a,{className:"py-3",children:Object(Le.jsxs)(Ie.a,{children:["Have an Account?"," ",Object(Le.jsx)(Ae.Link,{to:k?"/login?redirect=".concat(k):"/login",children:"Login"})]})})]})},pt=n(259),xt=function(e){var t=e.match,n=e.history,r=Object(a.useState)(""),c=Object(Te.a)(r,2),o=c[0],i=c[1],d=Object(s.b)(),u=Object(s.c)((function(e){return e.studentDetails})),b=u.loading,h=u.error,O=u.student,p=Object(s.c)((function(e){return e.studentUpdate})),x=p.loading,v=p.error,y=p.success,E=Object(s.c)((function(e){return e.studentDelete})),C=E.loading,I=E.error,A=E.success;Object(a.useEffect)((function(){var e;A&&n.push("/"),y&&d({type:S}),O&&O._id&&O._id===t.params.id||d((e=t.params.id,function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:m}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.get("/student/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:g,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:f,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}())),O&&O._id&&!o&&i(O.status)}),[d,t,y,A]);return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Ae.Link,{className:"btn btn-light my-3",to:"/",children:"Go Back"}),b||x||C?Object(Le.jsx)(Re,{}):h?Object(Le.jsx)(Fe,{variant:"danger",children:h}):Object(Le.jsxs)(Le.Fragment,{children:[v&&Object(Le.jsx)(Fe,{variant:"danger",children:v}),I&&Object(Le.jsx)(Fe,{variant:"danger",children:I}),O&&Object(Le.jsxs)(Ce.a,{children:[Object(Le.jsx)(Ie.a,{md:3,children:Object(Le.jsx)(_e.a,{src:O.image,alt:O.name,fluid:!0})}),Object(Le.jsx)(Ie.a,{md:3,children:Object(Le.jsxs)(pt.a,{variant:"flush",children:[Object(Le.jsx)(pt.a.Item,{children:Object(Le.jsx)("h3",{children:O.name})}),Object(Le.jsx)(pt.a.Item,{children:Object(Le.jsxs)("span",{children:["Phone No:",O.contact]})}),Object(Le.jsx)(pt.a.Item,{children:Object(Le.jsxs)("span",{children:["Father Contact:",O.fatherContact]})}),Object(Le.jsx)(pt.a.Item,{children:Object(Le.jsxs)("span",{children:["City:",O.city]})}),Object(Le.jsx)(pt.a.Item,{children:Object(Le.jsxs)("span",{children:["Address:",O.address]})})]})}),Object(Le.jsx)(Ie.a,{md:4,children:Object(Le.jsx)(Ne.a,{children:Object(Le.jsxs)(pt.a,{variant:"flush",children:[Object(Le.jsx)(pt.a.Item,{children:Object(Le.jsxs)(Ce.a,{children:[Object(Le.jsx)(Ie.a,{children:"Room No:"}),Object(Le.jsxs)(Ie.a,{children:[" ",O.roomNo]})]})}),Object(Le.jsx)(pt.a.Item,{children:Object(Le.jsxs)(Ce.a,{children:[Object(Le.jsx)(Ie.a,{children:"Block No:"}),Object(Le.jsxs)(Ie.a,{children:[" ",O.blockNo]})]})}),Object(Le.jsx)(pt.a.Item,{children:Object(Le.jsxs)(Ce.a,{children:[Object(Le.jsx)(Ie.a,{children:"Status:"}),Object(Le.jsx)(Ie.a,{children:Object(Le.jsx)(Ze.a.Control,{size:"sm",as:"select",value:o,onChange:function(e){return i(e.target.value)},children:["Hostel","Outside","Home"].map((function(e){return Object(Le.jsx)("option",{value:e,children:e},e)}))})})]})}),Object(Le.jsx)(pt.a.Item,{children:Object(Le.jsx)($e.a,{className:"btn-block",type:"button",onClick:function(){O.status=o,d(w(O))},children:"Update"})})]})})}),Object(Le.jsx)(Ie.a,{children:Object(Le.jsx)(pt.a,{variant:"flush",children:Object(Le.jsxs)(Ce.a,{children:[Object(Le.jsx)(pt.a.Item,{variant:"secondary",children:Object(Le.jsx)($e.a,{onClick:function(){n.push({pathname:"/student/edit/".concat(O._id),state:{studentProps:O}})},children:Object(Le.jsx)("i",{className:"fas fa-edit"})})}),Object(Le.jsx)(pt.a.Item,{children:Object(Le.jsx)($e.a,{variant:"danger",onClick:function(){var e;window.confirm("Are you sure")&&d((e=O._id,function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:T}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.delete("/student/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:N,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:_,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()))},children:Object(Le.jsx)("i",{className:"fas fa-trash"})})})]})})})]})]})]})},mt=function(e){var t=e.students,n=e.attendanceMap,r=e.setAttendanceMap,c=e.attendance,o=e.roomNo,i=Object(s.b)();Object(a.useEffect)((function(){}),[i,n]);return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsxs)(Je.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(Le.jsx)("thead",{children:Object(Le.jsxs)("tr",{children:[Object(Le.jsx)("th",{children:"NAME"}),Object(Le.jsx)("th",{children:"Attendance"}),Object(Le.jsx)("th",{children:"STATUS"}),Object(Le.jsx)("th",{children:"CONTACT"}),Object(Le.jsx)("th",{children:"CITY"})]})}),Object(Le.jsx)("tbody",{children:t&&t.map((function(e){return Object(Le.jsx)(Le.Fragment,{children:Object(Le.jsxs)("tr",{children:[Object(Le.jsx)("td",{children:Object(Le.jsx)(Ae.Link,{to:"/student/".concat(e._id),children:e.name})}),Object(Le.jsx)("td",{children:Object(Le.jsx)(Ze.a,{children:Object(Le.jsx)(Ze.a.Group,{controlId:"status",children:Object(Le.jsxs)(Ze.a.Control,{as:"select",size:"sm",defaultValue:n[e._id],onChange:function(t){var a=n;a[e._id]=t.target.value,r(a)},children:[Object(Le.jsx)("option",{children:"Hostel"}),Object(Le.jsx)("option",{children:"Home"}),Object(Le.jsx)("option",{children:"outside"})]})})})}),Object(Le.jsx)("td",{children:Object(Le.jsx)("span",{style:{color:"Outside"===e.status?"red":"Home"===e.status?"blue":"black"},children:e.status})}),Object(Le.jsx)("td",{children:Object(Le.jsx)("a",{href:"tel:".concat(e.contact),children:e.contact})}),Object(Le.jsx)("td",{children:e.city})]},e._id)})}))})]}),Object(Le.jsx)($e.a,{variant:"success",onClick:function(){c&&(c.roomNo.includes(o)||c.roomNo.push(o));var e=c?c.roomNo:o,a=n,r=c?c.details:{};t.map((function(e){r[e._id]={name:e.name,contact:e.contact,roomNo:e.roomNo}})),i(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:le}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.post("/attendance/",e,s);case 6:o=t.sent,i=o.data,n({type:je,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:ue,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}({roomNo:e,details:r,data:a}))},children:"Update Attendance"})]})},gt=function(e){var t=e.roomNo,n=Object(s.b)(),r=Object(a.useState)({}),c=Object(Te.a)(r,2),o=c[0],i=c[1],d=Object(s.c)((function(e){return e.getStudentsByRoomNo})),l=d.loading,j=d.error,u=d.students,b=d.attendance,h=Object(s.c)((function(e){return e.attendanceDataEnter})),O=h.loading,p=h.error;Object(a.useEffect)((function(){u&&x()}),[n,b,o,u]);var x=function(){if(b){var e=o;u.map((function(t){b.data[t._id]?e[t._id]=b.data[t._id]:e[t._id]="Hostel"})),i(o)}else u.map((function(e){var t=o;t[e._id]="Hostel",i(t)}));i(o)};return Object(Le.jsxs)(Le.Fragment,{children:[j&&Object(Le.jsx)(Fe,{variant:"danger",children:j}),l||O?Object(Le.jsx)(Re,{}):Object(Le.jsxs)(Le.Fragment,{children:[p&&Object(Le.jsx)(Fe,{variant:"danger",children:p}),u&&Object(Le.jsx)(Le.Fragment,{children:Object(Le.jsx)(mt,{students:u,attendanceMap:o,setAttendanceMap:i,attendance:b,roomNo:t})})]})]})},ft=function(){var e=Object(a.useState)(""),t=Object(Te.a)(e,2),n=t[0],r=t[1],c=Object(s.b)();Object(a.useEffect)((function(){}),[c]);var o=function(e){e.preventDefault(),c(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:I}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.get("/student/room/".concat(e),s);case 6:o=t.sent,i=o.data,n({type:A,payload:i}),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),n({type:L,payload:t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message});case 14:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}()}(n))};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)("h2",{children:"Take Attendance"}),Object(Le.jsxs)(Ze.a,{onSubmit:o,inline:!0,children:[Object(Le.jsx)(Ze.a.Control,{type:"text",value:n,name:"roomNo",placeholder:"Enter RoomNo",className:"mr-sm-2 ml-sm-5",onChange:function(e){return function(e){r(e.target.value)}(e)}}),Object(Le.jsx)($e.a,{type:"submit",onClick:o,children:"Get Students"})]}),Object(Le.jsx)(gt,{roomNo:n})]})},vt=function(e){var t=e.history,n=Object(a.useState)(""),r=Object(Te.a)(n,2),c=r[0],o=r[1],i=Object(a.useState)(""),d=Object(Te.a)(i,2),u=d[0],b=d[1],h=Object(a.useState)(""),O=Object(Te.a)(h,2),p=O[0],x=O[1],m=Object(a.useState)(""),g=Object(Te.a)(m,2),f=g[0],v=g[1],y=Object(a.useState)(null),E=Object(Te.a)(y,2),S=E[0],T=E[1],N=Object(s.b)(),_=Object(s.c)((function(e){return e.userDetails})),C=_.loading,I=_.error,A=_.user,L=Object(s.c)((function(e){return e.userLogin})).userInfo,k=Object(s.c)((function(e){return e.userUpdateProfile})).success;Object(a.useEffect)((function(){L?A&&A.name&&!k?(o(A.name),b(A.email)):(N({type:Z}),N(nt("profile"))):t.push("/login")}),[N,t,L,A,k]);return Object(Le.jsx)(Ce.a,{children:Object(Le.jsxs)(Ie.a,{md:3,children:[Object(Le.jsx)("h2",{children:"Profile"}),S&&Object(Le.jsx)(Fe,{variant:"danger",children:S}),k&&Object(Le.jsx)(Fe,{variant:"success",children:"Profile Updated"}),C?Object(Le.jsx)(Re,{}):I?Object(Le.jsx)(Fe,{variant:"danger",children:I}):Object(Le.jsxs)(Ze.a,{onSubmit:function(e){e.preventDefault(),p!==f?T("Passwords do not match"):N(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i,d;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:W}),r=a(),c=r.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.put("/users/profile",e,s);case 6:o=t.sent,i=o.data,n({type:K,payload:i}),n({type:P,payload:i}),localStorage.setItem("userInfo",JSON.stringify(i)),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(tt()),n({type:X,payload:d});case 18:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()}({id:A._id,name:c,email:u,password:p}))},children:[Object(Le.jsxs)(Ze.a.Group,{controlId:"name",children:[Object(Le.jsx)(Ze.a.Label,{children:"Name"}),Object(Le.jsx)(Ze.a.Control,{type:"name",placeholder:"Enter name",value:c,onChange:function(e){return o(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"email",children:[Object(Le.jsx)(Ze.a.Label,{children:"Email Address"}),Object(Le.jsx)(Ze.a.Control,{type:"email",placeholder:"Enter email",value:u,onChange:function(e){return b(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"password",children:[Object(Le.jsx)(Ze.a.Label,{children:"Password"}),Object(Le.jsx)(Ze.a.Control,{type:"password",placeholder:"Enter password",value:p,onChange:function(e){return x(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"confirmPassword",children:[Object(Le.jsx)(Ze.a.Label,{children:"Confirm Password"}),Object(Le.jsx)(Ze.a.Control,{type:"password",placeholder:"Confirm password",value:f,onChange:function(e){return v(e.target.value)}})]}),Object(Le.jsx)($e.a,{type:"submit",variant:"primary",children:"Update"})]})]})})},yt=function(e){var t=e.history,n=Object(s.b)(),r=Object(s.c)((function(e){return e.userList})),c=r.loading,o=r.error,i=r.users,d=Object(s.c)((function(e){return e.userLogin})).userInfo,u=Object(s.c)((function(e){return e.userDelete})).success;Object(a.useEffect)((function(){d&&d.isAdmin?n(function(){var e=Object(j.a)(Object(l.a)().mark((function e(t,n){var a,r,c,s,o,i;return Object(l.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t({type:$}),a=n(),r=a.userLogin.userInfo,c={headers:{Authorization:"Bearer ".concat(r.token)}},e.next=6,R.a.get("/users",c);case 6:s=e.sent,o=s.data,t({type:ee,payload:o}),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(0),"Not authorized, token failed"===(i=e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.message)&&t(tt()),t({type:te,payload:i});case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}()):t.push("/login")}),[n,t,u,d]);var b=function(e){window.confirm("Are you sure")&&n(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:ae}),r=a(),c=r.userLogin.userInfo,s={headers:{Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.delete("/users/".concat(e),s);case 6:n({type:re}),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),"Not authorized, token failed"===(o=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(tt()),n({type:ce,payload:o});case 14:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()}(e))};return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)("h1",{children:"Users"}),c?Object(Le.jsx)(Re,{}):o?Object(Le.jsx)(Fe,{variant:"danger",children:o}):Object(Le.jsxs)(Je.a,{striped:!0,bordered:!0,hover:!0,responsive:!0,className:"table-sm",children:[Object(Le.jsx)("thead",{children:Object(Le.jsxs)("tr",{children:[Object(Le.jsx)("th",{children:"ID"}),Object(Le.jsx)("th",{children:"NAME"}),Object(Le.jsx)("th",{children:"EMAIL"}),Object(Le.jsx)("th",{children:"ADMIN"}),Object(Le.jsx)("th",{})]})}),Object(Le.jsx)("tbody",{children:i.map((function(e){return Object(Le.jsxs)("tr",{children:[Object(Le.jsx)("td",{children:e._id}),Object(Le.jsx)("td",{children:e.name}),Object(Le.jsx)("td",{children:Object(Le.jsx)("a",{href:"mailto:".concat(e.email),children:e.email})}),Object(Le.jsx)("td",{children:e.isAdmin?Object(Le.jsx)("i",{className:"fas fa-check",style:{color:"green"}}):Object(Le.jsx)("i",{className:"fas fa-times",style:{color:"red"}})}),Object(Le.jsxs)("td",{children:[Object(Le.jsx)(Be.LinkContainer,{to:"/user/".concat(e._id,"/edit"),children:Object(Le.jsx)($e.a,{variant:"light",className:"btn-sm",children:Object(Le.jsx)("i",{className:"fas fa-edit"})})}),Object(Le.jsx)($e.a,{variant:"danger",className:"btn-sm",onClick:function(){return b(e._id)},children:Object(Le.jsx)("i",{className:"fas fa-trash"})})]})]},e._id)}))})]})]})},Et=function(e){var t=e.match,n=e.history,r=t.params.userId,c=Object(a.useState)(""),o=Object(Te.a)(c,2),i=o[0],d=o[1],u=Object(a.useState)(""),b=Object(Te.a)(u,2),h=b[0],O=b[1],p=Object(a.useState)(!1),x=Object(Te.a)(p,2),m=x[0],g=x[1],f=Object(s.b)(),v=Object(s.c)((function(e){return e.userDetails})),y=v.loading,E=v.error,S=v.user,T=Object(s.c)((function(e){return e.userUpdate})),N=T.loading,_=T.error,C=T.success;Object(a.useEffect)((function(){console.log(r),C?(f({type:de}),n.push("/userList")):S&&S.name&&S._id===r?(d(S.name),O(S.email),g(S.isAdmin)):f(nt(r))}),[f,n,r,S,C]);return Object(Le.jsxs)(Le.Fragment,{children:[Object(Le.jsx)(Ae.Link,{to:"/admin/userList",className:"btn btn-light my-3",children:"Go Back"}),Object(Le.jsxs)(ct,{children:[Object(Le.jsx)("h1",{children:"Edit User"}),N&&Object(Le.jsx)(Re,{}),_&&Object(Le.jsx)(Fe,{variant:"danger",children:_}),y?Object(Le.jsx)(Re,{}):E?Object(Le.jsx)(Fe,{variant:"danger",children:E}):Object(Le.jsxs)(Ze.a,{onSubmit:function(e){e.preventDefault(),f(function(e){return function(){var t=Object(j.a)(Object(l.a)().mark((function t(n,a){var r,c,s,o,i,d;return Object(l.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:se}),r=a(),c=r.userLogin.userInfo,s={headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}},t.next=6,R.a.put("/users/".concat(e._id),e,s);case 6:o=t.sent,i=o.data,n({type:oe}),n({type:Y,payload:i}),n({type:q}),t.next=18;break;case 13:t.prev=13,t.t0=t.catch(0),"Not authorized, token failed"===(d=t.t0.response&&t.t0.response.data.message?t.t0.response.data.message:t.t0.message)&&n(tt()),n({type:ie,payload:d});case 18:case"end":return t.stop()}}),t,null,[[0,13]])})));return function(e,n){return t.apply(this,arguments)}}()}({_id:r,name:i,email:h,isAdmin:m}))},children:[Object(Le.jsxs)(Ze.a.Group,{controlId:"name",children:[Object(Le.jsx)(Ze.a.Label,{children:"Name"}),Object(Le.jsx)(Ze.a.Control,{type:"name",placeholder:"Enter name",value:i,onChange:function(e){return d(e.target.value)}})]}),Object(Le.jsxs)(Ze.a.Group,{controlId:"email",children:[Object(Le.jsx)(Ze.a.Label,{children:"Email Address"}),Object(Le.jsx)(Ze.a.Control,{type:"email",placeholder:"Enter email",value:h,onChange:function(e){return O(e.target.value)}})]}),Object(Le.jsx)(Ze.a.Group,{controlId:"isadmin",children:Object(Le.jsx)(Ze.a.Check,{type:"checkbox",label:"Is Admin",checked:m,onChange:function(e){return g(e.target.checked)}})}),Object(Le.jsx)($e.a,{type:"submit",variant:"primary",children:"Update"})]})]})]})},St=function(){return Object(Le.jsxs)(Ae.BrowserRouter,{children:[Object(Le.jsx)(at,{}),Object(Le.jsx)("main",{className:"py-3",children:Object(Le.jsxs)(Me.a,{children:[Object(Le.jsx)(qe.d,{path:"/user/:userId/edit",component:Et}),Object(Le.jsx)(qe.d,{path:"/userList",component:yt}),Object(Le.jsx)(qe.d,{path:"/profile",component:vt}),Object(Le.jsx)(qe.d,{path:"/attendance",component:ft}),Object(Le.jsx)(qe.d,{path:"/analysis",component:bt}),Object(Le.jsx)(qe.d,{path:"/addStudent",component:st}),Object(Le.jsx)(qe.d,{path:"/student/edit/:id",component:st,exact:!0}),Object(Le.jsx)(qe.d,{path:"/student/:id",component:xt,exact:!0}),Object(Le.jsx)(qe.d,{path:"/login",component:ht,exact:!0}),Object(Le.jsx)(qe.d,{path:"/register",component:Ot,exact:!0}),Object(Le.jsx)(qe.d,{path:"/search/:keyword",component:Ve,exact:!0}),Object(Le.jsx)(qe.d,{path:"/page/:pageNumber",component:Ve,exact:!0}),Object(Le.jsx)(qe.d,{path:"/search/:keyword/page/:pageNumber",component:Ve,exact:!0}),Object(Le.jsx)(qe.d,{path:"/",component:Ve,exact:!0})]})}),Object(Le.jsx)(rt,{})]})},Tt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,260)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))};n(234);c.a.render(Object(Le.jsx)(s.a,{store:Se,children:Object(Le.jsx)(St,{})}),document.getElementById("root")),Tt()}},[[236,1,2]]]);
//# sourceMappingURL=main.d8628966.chunk.js.map